[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "L’INTERET PEDAGOGIQUE DES DONNEES IPUMS INTERNATIONAL",
    "section": "",
    "text": "Ce document de travail vise à explorer les possibilités d’utilisation de la base de données IPUMS International dans le cadre de l’école d’été CIST 2022-2023 “Outils et méthodes des sciences territoriales : une perspective Nord-Sud”.Il s’agit plus précisément de constituer des jeux de données statistiques et cartographiques permettant de comparer les recensements de plusieurs pays ou d’un pays à différentes dates.\n\n\nLa première partie du document rappelle les conditions générales d’utilisation des données IPUMS International et les modalités spécifiques d’emploi dans le cadre de préparation d’enseignements ou de formations professionnelles (Chapter 1). Elle détaille ensuite à l’aide d’un exemple les étapes d’acquisition d’échantillons de données décrivant les individus ou les ménages issues d’un ou plusieurs recensements (Chapter 2). Enfin, elle montre comment importer les fonds de carte correspondant soit à un recensement précis, soit à un ensemble de dates de recensement d’un même pays ce qui suppose une harmonisation des découpages (Chapter 3).\n\n\n\nLa seconde partie du document propose de vérifier la possibilité de construire des jeux de données comparables pour plusieurs pays. On a retenu pour cela les derniers recensements disponibles sur IPUMS pour les pays africains participant à l’EE CIST2023. Le Niger et la Côte d’Ivoire ne font malheureusment pas partie actuellement des pays présents dans la base IPUMS International mais ils pourront faire l’objet d’extraction à partir d’autres sources. Au total nous avons donc récupéré des échantillons de 10% de la population et des ménages pour les pays et les années suivantes :\n\nRP Bénin, 2013\nRP Burkina Faso, 2006\nRP Mali, 2009,\nRP Sénégal, 2013\nRP Togo, 2009\n\nEn nous limitant aux variables harmonisées par IPUMS qui sont présentes dans les cinq pays, nous avons procédé à une série de test permettant de vérifier la possibilité de reproduire les mêmes analyses sur chacun des pays. Ces tests concernent des analyses simples débouchant sur des jeux de données qui pourraient fournir une matière première utile à de nombreux modules :\n\nPopulations, superficie et densité. Nous avons construit ces indicateurs pour chaque pays à deux niveaux territoriaux d’agrégation. Après les avoir visualisé sous forme de cartes classiques, nous avons testé la possibilité de construire des cartogrammes démographiques de chaque pays où la surface des unités territoriales est proportionelle à leur population (Chapter 4)\nIndicateurs de développement. En se limitant au cas de l’électrification des ménages, nous avons testé la possibilité de constituer des cartes comparables du taux d’électrification pour chacun des cinq pays et à deux niveaux d’agrégation administrative (Chapter 5)\nAge, sexe, urbanisation. Nous avons testé la possibilité de créer des tableaux de contingence multidimensionnelles permettant de définir des sous-population en fonction de leur âge, de leur sexe et de leur milieu urbain ou rural. Ces tableaux permettent de créer des images simples comme des pyramides des âges ou des cartographies du % de jeunes en milieu urbain ou rural.Mais ils permettent aussi d’évaluer les effectifs disponibles dans chaque cas de croisement structurel afin d’estimer les erreurs d’e calcul’estimation que cela impliquerait si l’on voulait calculer d’autres indicateurs (Chapter 6)\n\n\n\n\nLa dernière partie examine la possibilié de comparer les évolutions d’un pays à plusieurs dates de recensement grâce au travail d’harmonisation des indicateurs et des niveaux territoriaux réalisé par IPUMS. Nous avons pris l’exemple des recensements du Bénin de 1979, 1992, 2002 et 2013 pour tester une méthode qui serait reproductible dans d’autres pays comme le Burkina Faso (1996 et 2006), le Mali (1987, 1998, 2009) ou le Sénégal (1998, 2002, 2013).\n\nl’extraction des données. Elle a été menée en se focalisant sur un jeu de variables relatifs à la mobilité des personnes au cours du temps puisque c’est précisément un sujet où le temps joue un rôle décisif. En dehors des caractéristiques individuelles, nous avons extrait les variables permettant de reconstituer à la fois les migrations durée de vie (depuis la naissance) et les dernières migrations déduite du domicile précédent et de la durée de présence dans la résidence actuelle (Chapter 7).\nLes migrations durée de vie. Elles ont été utilisés pour un premier test de création d’indicateurs comparables aux quatres dates de recensement. Pour chaque département ou commune, nous avons calculé pour chaque recensement les personnes “stables” (nées dans l’unité territoriales de recensement), “immigrantes” (nées dans une autre unité territoriale) et “émigrantes” (présentes dans une autre unité territoriale que celle de leur naissance). Nous en avons déduite ensuite un certain nombre d’indicateurs cartographiables tels que le solde ou le volume migratoire apparents (Chapter 8).\nLes parcours de vie. Ils ont fait l’objet d’une analyse plus complexe visant à combiner ce que l’on peut savoir des parcours de vie (lieu de naissance, dernière résidence, résidence actuelle) avec des critères individuels tels que l’âge, le sexe, le niveau de diplôme, etc (Chapter 9)"
  },
  {
    "objectID": "credits.html",
    "href": "credits.html",
    "title": "Sources",
    "section": "",
    "text": "L’ensemble des données statistiques ou cartographiques utilisées dans ce document sont issues de la base de données IPUMS International qui est maintenue par l’oganisation suivante :\n\nMinnesota Population Center. Integrated Public Use Microdata Series, International: Version 7.3 [dataset]. Minneapolis, MN: IPUMS, 2020. https://doi.org/10.18128/D020.V7.3"
  },
  {
    "objectID": "credits.html#instituts-statistiques-nationaux",
    "href": "credits.html#instituts-statistiques-nationaux",
    "title": "Sources",
    "section": "Instituts statistiques nationaux",
    "text": "Instituts statistiques nationaux\nA travers IPUMS International, les données mises à disposition sont à mettre au crédit des organismes statistiques nationaux des pays qui ont réalisé les recensements et dont la liste suit ;\n\nBenin : National Institute of Statistics and Economic Analysis\nBurkina Faso : National Institute of Statistics and Demography\nMali : National Directorate of Statistics and Informatics\nSenegal : National Agency of Statistics and Demography\nTogo : National Institute of Statistics (INSEED)"
  },
  {
    "objectID": "credits.html#ecole-dété-cist-2022-2023",
    "href": "credits.html#ecole-dété-cist-2022-2023",
    "title": "Sources",
    "section": "Ecole d’été CIST 2022-2023",
    "text": "Ecole d’été CIST 2022-2023\nLes traitements des données ont été réalisés par les formateurs de l’Ecole d’Eté CIST2022-2023."
  },
  {
    "objectID": "d01_00_import_introduction.html",
    "href": "d01_00_import_introduction.html",
    "title": "IMPORTATION DES DONNEES",
    "section": "",
    "text": "ipums homepage"
  },
  {
    "objectID": "d01_01_import_conditions.html#conditions-générales",
    "href": "d01_01_import_conditions.html#conditions-générales",
    "title": "1  Conditions d’utilisation",
    "section": "1.1 Conditions générales",
    "text": "1.1 Conditions générales\nLes données fournies par IPUMS sont soumises à des conditions d’utilisation qui doivent être respectées et que nous avons retraduites ici en français (merci à google translate).\n\n1.1.1 Redistribution interdite\n\n“Toutes les données extraites de la base de données IPUMS International sont destinées au seul usage du licencié. En vertu des accords d’IPUMS International avec des agences collaboratrices, la redistribution des données à des tiers est interdite. Chaque membre d’une équipe de recherche utilisant les données doit demander l’accès et obtenir une licence individuelle”.\n\n\nCommentaire : l’ensemble des participants à l’école d’été devra donc acquérir une licence individuelle IPUMS et sera réputé avoir effectué l’ensemble des opérations d’acquisitions décrites par la suite.\n\n\n\n1.1.2 Usage : Limitation à la recherche et l’enseignement\n\n“Ces extraits de microdonnées sont fournis à des fins exclusives d’enseignement et de recherche scientifique et ne peuvent être utilisés à d’autres fins sans l’approbation écrite explicite de l’autorité statistique officielle compétente. Il est interdit aux utilisateurs d’utiliser les données d’IPUMS International ou d’autres distributeurs autorisés dans la poursuite de toute entreprise commerciale ou génératrice de revenus, à titre privé ou autre. La publication de résultats de recherche basés sur les microdonnées d’IPUMS International est autorisée dans les communications telles que les articles scientifiques, les revues, les rapports de recherche, etc. L’utilisation de ces données à des fins généalogiques est strictement interdite”\n\n\nCommentaire : Les objectifs de l’EE CIST 2023 sont parfaitement en accord avec les règles d’usage de la base. Il faudra toutefois bien prendre garde de citer la source dans l’ensemble des documents pédagogiques ainsi que les éventuels articles de recherche\n\n\n\n1.1.3 Confidentialité : interdiction d’identifier des individus\n\n“Les utilisateurs maintiendront la confidentialité des personnes et des ménages. Tous les identifiants directs, ainsi que toutes les caractéristiques qui pourraient conduire à une identification, sont omis des données. Toute tentative de vérifier l’identité des personnes ou des ménages à partir des microdonnées est interdite. Il est également interdit d’alléguer qu’une personne ou un ménage a été identifié dans ces données. Les résultats statistiques susceptibles de révéler l’identité de personnes ou d’entités ne peuvent être communiqués ou publiés sous quelque forme que ce soit.”\n\n\nCommentaire : Même si les données sont en général anciennes et portent sur des échantillons de 10% maximum, il est impératif de respecter systématiquement l’obligation de confidentialité et de tenter de repérer une personne si IPUMS n’a pas suffisamment assuré cette condition.\n\n\n\n1.1.4 Sécurité : protection des micro-données\n\n“Les utilisateurs mettront en œuvre des mesures de sécurité pour empêcher tout accès non autorisé aux microdonnées acquises auprès d’IPUMS International, de ses partenaires ou distributeurs autorisés. À l’issue de cette recherche, les extraits de données ne peuvent être conservés que s’ils peuvent être sécurisés en toute sécurité. Si la sécurité ne peut être garantie, les microdonnées doivent être détruites.”\n\n\nCommentaire : Cette obligation signifie que les données individuelles ne pourront pas être mises à disposition via le serveur de l’EE CIST 2023 sauf si celui-ci est correctement sécurisé. Il faudra les faire télécharger par les stagiaires ou formateur au moment de celle-ci. On pourra en revanche stocker les indicateurs agrégés issus de l’agrégation des données individuelles.\n\n\n\n1.1.5 Obligation de citation\n\n“Vous devez citer IPUMS International et l’autorité statistique officielle compétente comme source des microdonnées. Chaque extrait est accompagné d’un langage de citation approprié et pour plus d’informations sur la citation appropriée, reportez-vous à la citation et à l’utilisation. Les publications et les rapports de recherche utilisant IPUMS International doivent être ajoutés à la [bibliographie du projet IPUMS] (https://bibliography.ipums.org/).”\n\n\nCommentaire : les documents pédagogiques de l’EE CIST 2023 utilisant les données IPUMS devront se conformer à cette obligation de même que les éventuels articles de recherche qui en seront issus.\n\n\n\n1.1.6 Rapports d’erreurs\n\n“L’utilisateur accepte d’informer ipums@umn.edu des erreurs dans les données”\n\n\nCommentaire : c’est la moindre des choses dans une perspective éthique et collaborative.\n\n\n\n1.1.7 Sanctions en cas de non respect\n\n“La violation de cet accord entraînera la révocation de cette licence, le rappel de toutes les microdonnées acquises, une motion de censure à la ou aux organisations professionnelles concernées et des poursuites civiles en vertu des lois nationales ou internationales, à la discrétion des régents de l’Université du Minnesota. et les agences statistiques officielles. Des sanctions peuvent également être prises contre l’institution à laquelle le contrevenant est affilié.”\n\n\nCommentaire : sans commentaires … il serait catastrophique pour le projet d’EE CIST 2023 de voir l’ensemble des cours mis à l’index …"
  },
  {
    "objectID": "d01_01_import_conditions.html#conditions-pour-lenseignement",
    "href": "d01_01_import_conditions.html#conditions-pour-lenseignement",
    "title": "1  Conditions d’utilisation",
    "section": "1.2 Conditions pour l’enseignement",
    "text": "1.2 Conditions pour l’enseignement\nLes règles générales sont assouplies dans le cas de formations pédagogiques qu’IPUMS encourage particulièrement. Le site web fournit d’ailleurs un certain nombre de ressources pédagogiques sous la forme de videos ou de programmes corrigés écrits en R ou Stata.\n\n\n\nRessources pédagogiques offertes par IPUMS\n\n\nMais le point le plus intéressant pour l’EE CIST2023 est la possibilité de créer des classrooms c’est-à-dire des groupes d’utilisateurs (enseignants ou stagiaires) qui peuvent partager les mêmes fichiers de données pour une période de temps. Les conditions d’utilisation sont particulièrement intéressantes comme le montre la traduction en français de la page correspondante.\n\n1.2.1 Conditions générales\n\nLes utilisateurs d’IPUMS peuvent créer des comptes de classe. Les comptes ont trois caractéristiques principales : Les instructeurs peuvent partager des extraits de données en ligne avec les étudiants, Les étudiants peuvent s’inscrire plus facilement que les utilisateurs réguliers. Les instructeurs peuvent voir une liste de ceux qui sont inscrits et donc capables de recevoir des données IPUMS.\n\n\nCommentaire : Ces conditions sont parfaitement en adéquation avec les objectifs de l’EE CIST 2023. Il suffira donc que tous les formateurs se créent un compte IPUMS puis rejoignent la salle de classe commune. Quant aux autres participants (étudiants, doctorants) on aura juste à leur forunir un code d’accès.\n\n\n\n1.2.2 Création d’une classe\n\nL’instructeur doit remplir une demande de compte de classe décrivant la classe. Le lien pour ce faire est disponible sur la page d’inscription et de connexion de l’utilisateur, après la connexion. Après approbation, l’instructeur recevra un code qu’il distribuera à ses étudiants, qu’il utilisera pour sa propre inscription. Pour les instructeurs, un nouveau lien apparaîtra sur la page d’inscription et de connexion pour “voir mes cours”.\n\n\nCommentaire : Claude Grasland a déposé le 23/08/2022 une demande de création d’un classe pour tester la fonctionnalité.\n\n\n\n1.2.3 Inscription des participants\n\nL’inscription des étudiants est similaire à l’inscription des utilisateurs réguliers. Les étudiants se rendent sur la page d’inscription et cliquent sur “demander l’accès”. Les étudiants entrent le code de classe fourni par l’instructeur dans le champ appelé “Code de groupe d’inscription”. Lorsque les étudiants cliquent sur “Soumettre le code”, 3 champs du formulaire de candidature (institution, domaine de recherche et description de la recherche) sont pré-remplis pour faciliter une approbation rapide par le personnel de l’IPUMS. Si un étudiant potentiel est déjà un utilisateur IPUMS enregistré, il lui suffit de se connecter et de cliquer sur le lien pour “rejoindre un cours”, auquel cas il sera invité à saisir le code de la classe.\n\n\nCommentaire : On pourra tester cette méthode lors d’une prochaine réunion des formateurs.\n\n\n\n1.2.4 Gestion des classes\n\nLes instructeurs peuvent cliquez sur le lien de la page d’inscription pour sélectionner un cours. Il peut voir qui est enregistré et donc autorisé à recevoir des données IPUMS. Les instructeurs peuvent partager des extraits avec les membres de la classe via le site Web IPUMS. Tout extrait contenant des données sur la page de téléchargement de l’instructeur peut être partagé avec les étudiants (il peut être nécessaire de régénérer d’abord les extraits plus anciens). Les extraits partagés apparaîtront dans un onglet séparé sur les pages de téléchargement d’extraits personnels des étudiants. Les extraits partagés ne seront pas supprimés du serveur IPUMS pendant la durée du cours, il n’y a donc aucun risque que les données soient altérées. Remarque : Les étudiants peuvent créer leurs propres extraits de données, comme n’importe quel autre utilisateur. Ainsi, les instructeurs ne sont pas limités uniquement au partage des ensembles de données qu’ils construisent. Le processus d’extraction peut faire partie de l’expérience d’apprentissage.\n\n\nCommentaire : Le fait que les étudiants puissent créer leurs propres extraits est pédagogiquement très intéressant.\n\n\n\n1.2.5 Obligations\n\nLes données doivent être conservées en toute sécurité quelle que soit leur distribution. Les étudiants sont soumis aux mêmes contraintes que tout autre utilisateur à cet égard. Ils ne peuvent pas partager les données avec quiconque n’est pas un utilisateur enregistré. Les instructeurs doivent s’assurer que les étudiants comprennent les exigences concernant la sécurité et le partage des données. Les instructeurs doivent retirer de la liste de classe toute personne qui n’est pas un étudiant ou qui abandonne la classe. Ces personnes perdront l’accès jusqu’à ce qu’elles s’inscrivent sur leur propre compte.\n\n\nCommentaire : Les facilités offertes par cette solution ne doivent pas nous dispenser d’une grande rigueur dans la sécurité sur le stockage et le partage des données.\n\n\n\n1.2.6 Remarques complémentaires\n\nL’inscription expirera à la fin de la classe, qui doit avoir lieu dans l’année suivant son lancement. Les cours expirés seront conservés indéfiniment dans le compte de l’instructeur, mais ils disparaîtront des comptes des étudiants. Les étudiants qui souhaitent se connecter après l’expiration du compte de classe doivent se réinscrire et être approuvés en tant qu’utilisateur régulier.\n\n\nCommentaire : La classe créée par Claude Grasland en Août 2022 demeure valide jusqu’en juin 2023 ce qui est suffisant pour la seconde phase de l’école d’été. On réfléchira ultérieurement aux moyens de pérenniser les accès."
  },
  {
    "objectID": "d01_02_import_individus.html",
    "href": "d01_02_import_individus.html",
    "title": "2  Données individuelles",
    "section": "",
    "text": "Après avoir créé votre compte, vous pourrez accéder à l’onglet appelé “browse and select data” dans la barre latérale gauche :\nIl vous amènera à la fenêtre de sélection des micro-données qui doit ressembler à ceci :\nVous allez alors devoir effectuer successivement trois choix pour constituer votre requête :"
  },
  {
    "objectID": "d01_02_import_individus.html#choix-des-recensements",
    "href": "d01_02_import_individus.html#choix-des-recensements",
    "title": "2  Données individuelles",
    "section": "2.1 Choix des recensements",
    "text": "2.1 Choix des recensements\nEn cliquant sur le bouton “SELECT SAMPLES” on va tout d’abord choisir les recensements qui nous intéressent. On peut en retenir soit un seul soit plusieurs à la fois. Ici, nous avons retenu cinq recensements correspondant aux pays africains qui participent à l’EE CIST 2023, en retenant à chaque fois le dernier disponible dans IPUMS.\n\n\n\nRecensements africains disponibles dans IPUMS International\n\n\nOn constate qu’il n’existe malheureusement pas de données pour la Côte d’Ivoire et le Niger dans IPUMS. Par ailleurs les recensements les plus récents ne sont pas forcément disponibles pour les autres pays. Mais il existe une contrepartie positive majeure qui est le travail d’harmonistation des variables qui a été réalisé par IPUMS."
  },
  {
    "objectID": "d01_02_import_individus.html#choix-des-variables",
    "href": "d01_02_import_individus.html#choix-des-variables",
    "title": "2  Données individuelles",
    "section": "2.2 Choix des variables",
    "text": "2.2 Choix des variables\nIl existe deux options différentes pour extraire des variables, selon qu’on souhaite utiliser les données originales propres à chaque pays et chaque date (“Source variables”) ou que l’on préfère utiliser des données harmonisées par IPUMS (“Harmonized variables”) qui utilisent les même code et les même catégories.\nLa seconde solution apparaît de loin la plus intéressante pour l’EE CIST 2023 puisqu’elle va permettre de proposer des séquences pédagogiques qui seront facilement reproductibles d’un pays à l’autre. A condition évidemment que les variables harmonisées soient disponibles dans tous les pays, ce qui n’est bien évidemment pas toujours vrai.\nDes écrans permettent de visualiser pour chacune des variables ou des groupes de variables si elle est disponible pour les différents recensements. Les variables dites “techniques” sont proposées par défaut et il est en général préférable de les garder puisque c’est grâce à elle qu’on pourra ensuite effectuer les pondérations, mettre en relation les individus et les ménages etc.\n\n\n\nVariables par défaut : ménages\n\n\n\n\n\nVariables par défaut : individus\n\n\nEn cliquant sur la colonne (“Add to cart”) on choisit les autres variables que l’on souhaite retenir. Par exemple, on peut regarder quelles variables harmonisées sont disponibles pour l’équipement des ménages et en choisir trois :\n\n\n\nExemple de sélection de variables sur l’équipement des ménages\n\n\nNous avons effectué une sélection assez large de variables pour l’EE CIST 2023 en privilégiant celles qui étaient disponibles pour chacun des recensements des 5 pays. Nous y avons ajouté pour chaque pays le code géographique des unités de niveau I et II spécifique à l’année concernée. Ces codes spécifiques qui commencent par GEO1 ou GEO2 sont en effet indispensable si l’on souhaite utiliser la géographie administraive précise de l’année du recensement plutôt que la géographie harmonisée commune à plusieurs dates qui est fournie par défaut dans les variables GEOLEV1 et GEOLEV2.\n\n\n\nListe de variables retenus pour les 5 recensements\n\n\n\n\n\n\n\nType\nVariable\nLabel\n\n\n\n\nH\nCOUNTRY\nCountry\n\n\nH\nYEAR\nYear\n\n\nH\nSAMPLE\nIPUMS sample identifier\n\n\nH\nSERIAL\nHousehold serial number\n\n\nH\nPERSONS\nNumber of person records in the household\n\n\nH\nHHWT\nHousehold weight\n\n\nH\nURBAN\nUrban-rural status\n\n\nH\nREGIONW\nContinent and region of country\n\n\nH\nGEOLEV1\n1st subnational geographic level, world [consistent boundaries over time]\n\n\nH\nGEOLEV2\n2nd subnational geographic level, world [consistent boundaries over time]\n\n\nH\nGEO1_BJ2013\nBenin, Department 2013 [Level 1, GIS]\n\n\nH\nGEO2_BJ2013\nBenin, Commune 2013 [Level 2, GIS]\n\n\nH\nGEO1_BF2006\nBurkina Faso, Region 2006 [Level 1, GIS]\n\n\nH\nGEO2_BF2006\nBurkina Faso, Province 2006 [Level 2, GIS]\n\n\nH\nGEO1_ML2009\nMali, Region 2009 [Level 1, GIS]\n\n\nH\nGEO2_ML2009\nMali, Circle 2009 [Level 2, GIS]\n\n\nH\nGEO1_SN2013\nSenegal, Region 2013 [Level 1, GIS]\n\n\nH\nGEO2_SN2013\nSenegal, Department 2013 [Level 2, GIS]\n\n\nH\nGEO1_TG2010\nTogo, Region 2010 [Level 1, GIS]\n\n\nH\nGEO2_TG2010\nTogo, Prefecture 2010 [Level 2, GIS]\n\n\nH\nOWNERSHIP (general)\nOwnership of dwelling [general version]\n\n\nH\nOWNERSHIPD (detailed)\nOwnership of dwelling [detailed version]\n\n\nH\nELECTRIC\nElectricity\n\n\nH\nTRASH\nTrash disposal\n\n\nH\nTOILET\nToilet\n\n\nP\nPERNUM\nPerson number\n\n\nP\nPERWT\nPerson weight\n\n\nP\nRESIDENT\nResidence status: de facto, de jure\n\n\nP\nRELATE (general)\nRelationship to household head [general version]\n\n\nP\nRELATED (detailed)\nRelationship to household head [detailed version]\n\n\nP\nAGE\nAge\n\n\nP\nAGE2\nAge, grouped into intervals\n\n\nP\nSEX\nSex\n\n\nP\nMARST (general)\nMarital status [general version]\n\n\nP\nMARSTD (detailed)\nMarital status [detailed version]\n\n\nP\nBIRTHYR\nYear of birth\n\n\nP\nBPLCOUNTRY\nCountry of birth\n\n\nP\nNATION\nCountry of citizenship\n\n\nP\nRELIGION (general)\nReligion [general version]\n\n\nP\nRELIGIOND (detailed)\nReligion [detailed version]\n\n\nP\nSCHOOL\nSchool attendance\n\n\nP\nLIT\nLiteracy\n\n\nP\nEDATTAIN (general)\nEducational attainment, international recode [general version]\n\n\nP\nEDATTAIND (detailed)\nEducational attainment, international recode [detailed version]\n\n\nP\nEMPSTAT (general)\nActivity status (employment status) [general version]\n\n\nP\nEMPSTATD (detailed)\nActivity status (employment status) [detailed version]\n\n\nP\nLABFORCE\nLabor force participation\n\n\nP\nDISABLED\nDisability status\n\n\nP\nDISBLND\nBlind or vision-impaired\n\n\nP\nDISDEAF\nDeaf or hearing-impaired"
  },
  {
    "objectID": "d01_02_import_individus.html#choix-du-niveau-déchantillonage",
    "href": "d01_02_import_individus.html#choix-du-niveau-déchantillonage",
    "title": "2  Données individuelles",
    "section": "2.3 Choix du niveau d’échantillonage",
    "text": "2.3 Choix du niveau d’échantillonage\nUne fois définis les échantillons et les variables vous êtes prêts à télécharger les données mais il reste encore à définir le niveau d’échantillonnage souhaité.\n La valeur initiale qui correspond au maximum autorisé par IPUMS et les organismes producteurs des recensement est en générale égale à 10% des individus et/ou des ménages. Mais on peut opter pour un échantillon plus réduit en fixant un autre pourcentage ou un nombre précis d’individus. On peut par exemple se ramener à 1% seulement des observations ce qui divise par 10 la taille du fichier :\n ### Récupération des données et métadonnées\nUne fois lancée la requête à l’aide du bouton “SUBMIT EXTRACT” il faut attendre quelques minutes (généralement 2 ou 3) pour accèder au résultat. Celui-ci est annoncé par un courriel mais peut aussi être suivi directement par le navigateur :"
  },
  {
    "objectID": "d01_02_import_individus.html#récupération-des-fichiers",
    "href": "d01_02_import_individus.html#récupération-des-fichiers",
    "title": "2  Données individuelles",
    "section": "2.4 Récupération des fichiers",
    "text": "2.4 Récupération des fichiers\nPour pouvoir charger ensuite les données dans R ou un autre logiciel, nous aurons besoin à chaque fois de deux fichiers :\n\nle fichier .DAT qui contient les données au format compressé .gz\nle fichier DDI qui contient les métadonnées au format .xml\n\n\n\n\nRécupération des fichiers IPUMS\n\n\n- N.B. : Il est inutile de décompresser les fichiers de données au format .gz car cela accroîtrait inutilement leur place et risquerait de bloquer l’opération suivante d’importation."
  },
  {
    "objectID": "d01_02_import_individus.html#importation-dans-r",
    "href": "d01_02_import_individus.html#importation-dans-r",
    "title": "2  Données individuelles",
    "section": "2.5 Importation dans R",
    "text": "2.5 Importation dans R\nPour importer les données dans R, il faut installer le package ipumsr qui va nous permettre de lire les métadonnées puis d’importer les données en une seule opération.\n\nlibrary(ipumsr)\n\n# Importation de l'échantillon à 10%\nddi <- read_ipums_ddi(\"ipums/rp/ipumsi_00018.xml\")\ndata <- read_ipums_micro(ddi)\nsaveRDS(data,\"ipums/rp/rp_fivecountries_samp10pct.RDS\")"
  },
  {
    "objectID": "d01_02_import_individus.html#conversion-de-format-dans-r",
    "href": "d01_02_import_individus.html#conversion-de-format-dans-r",
    "title": "2  Données individuelles",
    "section": "2.6 Conversion de format dans R",
    "text": "2.6 Conversion de format dans R\nNous reviendrons ultérieurement sur le format du tableau R obtenu qui n’est pas un data.frame standard car il comporte des labels supplémentaire donnant à la fois le nom des variables et le code de leurs modalités. On retiendra juste ici que les données initialement de type haven_labelled peuvent être converties en type factor à l’aide du package haven ce qui permet de visualiser plus facilement.\nA titre d’exemple, le petit programme ci-dessous convertit l’ensemble des données en factor et affiche les premières lignes.\n\nlibrary(haven)\n\n# Lit le fichier enregistré\nrp<-readRDS(\"ipums/rp/rp_fivecountries_samp10pct.RDS\")\n\n# Convertit les variables haven_labelled en factors\nrp<-as_factor(rp, only_labelled=T)\nclass(rp)\n\n> [1] \"tbl_df\"     \"tbl\"        \"data.frame\"\n\n# Convertit le tableau en pur data.frame\nrp<-as.data.frame(rp)\nclass(rp)\n\n> [1] \"data.frame\"\n\n# Affiche les 10 premières lignes (soit 2 ménages de 5 personnes )\nkable(head(rp,10), caption = \"Extrait des données IPUMS International\")\n\n\nExtrait des données IPUMS International\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCOUNTRY\nYEAR\nSAMPLE\nSERIAL\nPERSONS\nHHWT\nURBAN\nREGIONW\nGEOLEV1\nGEOLEV2\nGEO1_BJ2013\nGEO2_BJ2013\nGEO1_BF2006\nGEO2_BF2006\nGEO1_ML2009\nGEO2_ML2009\nGEO1_SN2013\nGEO2_SN2013\nGEO1_TG2010\nGEO2_TG2010\nOWNERSHIP\nOWNERSHIPD\nELECTRIC\nTRASH\nTOILET\nPERNUM\nPERWT\nRESIDENT\nRELATE\nRELATED\nAGE\nAGE2\nSEX\nMARST\nMARSTD\nBIRTHYR\nBPLCOUNTRY\nNATION\nRELIGION\nRELIGIOND\nSCHOOL\nLIT\nEDATTAIN\nEDATTAIND\nEMPSTAT\nEMPSTATD\nLABFORCE\nDISABLED\nDISBLND\nDISDEAF\n\n\n\n\nBurkina Faso\n2006\nBurkina Faso 2006\n1000\n7\n10\nRural\nWestern Africa\n854001\n854001013\nNA\nNA\nBoucle du Mouhoun\nKossi\nNA\nNA\nNA\nNA\nNA\nNA\nOwned\nOwned\nNo\nOther dumping\nNo toilet\n1\n10\nPresent resident\nHead\nHead\n46\n45 to 49\nMale\nMarried/in union\nMarried, monogamous\nUnknown\nMali\nBurkina Faso\nMuslim\nMuslim\nNo, never attended\nNo, illiterate\nLess than primary completed\nNo schooling\nEmployed\nEmployed, not specified\nYes, in the labor force\nNo, not disabled\nNo\nNo\n\n\nBurkina Faso\n2006\nBurkina Faso 2006\n1000\n7\n10\nRural\nWestern Africa\n854001\n854001013\nNA\nNA\nBoucle du Mouhoun\nKossi\nNA\nNA\nNA\nNA\nNA\nNA\nOwned\nOwned\nNo\nOther dumping\nNo toilet\n2\n10\nPresent resident\nSpouse/partner\nSpouse/partner\n40\n40 to 44\nFemale\nMarried/in union\nMarried, monogamous\nUnknown\nBurkina Faso\nBurkina Faso\nMuslim\nMuslim\nNo, never attended\nNo, illiterate\nLess than primary completed\nNo schooling\nEmployed\nEmployed, not specified\nYes, in the labor force\nNo, not disabled\nNo\nNo\n\n\nBurkina Faso\n2006\nBurkina Faso 2006\n1000\n7\n10\nRural\nWestern Africa\n854001\n854001013\nNA\nNA\nBoucle du Mouhoun\nKossi\nNA\nNA\nNA\nNA\nNA\nNA\nOwned\nOwned\nNo\nOther dumping\nNo toilet\n3\n10\nPresent resident\nChild\nChild\n3\n0 to 4\nFemale\nSingle/never married\nSingle/never married\n2003\nBurkina Faso\nBurkina Faso\nMuslim\nMuslim\nNo, never attended\nNo, illiterate\nLess than primary completed\nNo schooling\nNIU (not in universe)\nNIU (not in universe)\nNIU (not in universe)\nNo, not disabled\nNo\nNo\n\n\nBurkina Faso\n2006\nBurkina Faso 2006\n1000\n7\n10\nRural\nWestern Africa\n854001\n854001013\nNA\nNA\nBoucle du Mouhoun\nKossi\nNA\nNA\nNA\nNA\nNA\nNA\nOwned\nOwned\nNo\nOther dumping\nNo toilet\n4\n10\nPresent resident\nChild\nChild\n6\n5 to 9\nMale\nSingle/never married\nSingle/never married\n2000\nBurkina Faso\nBurkina Faso\nMuslim\nMuslim\nNo, never attended\nNo, illiterate\nLess than primary completed\nNo schooling\nEmployed\nEmployed, not specified\nNIU (not in universe)\nNo, not disabled\nNo\nNo\n\n\nBurkina Faso\n2006\nBurkina Faso 2006\n1000\n7\n10\nRural\nWestern Africa\n854001\n854001013\nNA\nNA\nBoucle du Mouhoun\nKossi\nNA\nNA\nNA\nNA\nNA\nNA\nOwned\nOwned\nNo\nOther dumping\nNo toilet\n5\n10\nPresent resident\nChild\nChild\n9\n5 to 9\nMale\nSingle/never married\nSingle/never married\n1997\nBurkina Faso\nBurkina Faso\nMuslim\nMuslim\nNo, never attended\nNo, illiterate\nLess than primary completed\nNo schooling\nEmployed\nEmployed, not specified\nNIU (not in universe)\nNo, not disabled\nNo\nNo\n\n\nBurkina Faso\n2006\nBurkina Faso 2006\n1000\n7\n10\nRural\nWestern Africa\n854001\n854001013\nNA\nNA\nBoucle du Mouhoun\nKossi\nNA\nNA\nNA\nNA\nNA\nNA\nOwned\nOwned\nNo\nOther dumping\nNo toilet\n6\n10\nPresent resident\nChild\nChild\n16\n15 to 19\nMale\nSingle/never married\nSingle/never married\n1990\nBurkina Faso\nBurkina Faso\nMuslim\nMuslim\nNo, never attended\nNo, illiterate\nLess than primary completed\nNo schooling\nEmployed\nEmployed, not specified\nYes, in the labor force\nNo, not disabled\nNo\nNo\n\n\nBurkina Faso\n2006\nBurkina Faso 2006\n1000\n7\n10\nRural\nWestern Africa\n854001\n854001013\nNA\nNA\nBoucle du Mouhoun\nKossi\nNA\nNA\nNA\nNA\nNA\nNA\nOwned\nOwned\nNo\nOther dumping\nNo toilet\n7\n10\nPresent resident\nChild\nChild\n20\n20 to 24\nMale\nSingle/never married\nSingle/never married\n1986\nBurkina Faso\nBurkina Faso\nMuslim\nMuslim\nNo, never attended\nUnknown/missing\nLess than primary completed\nNo schooling\nEmployed\nEmployed, not specified\nYes, in the labor force\nNo, not disabled\nNo\nNo\n\n\nBurkina Faso\n2006\nBurkina Faso 2006\n2000\n5\n10\nRural\nWestern Africa\n854001\n854001013\nNA\nNA\nBoucle du Mouhoun\nKossi\nNA\nNA\nNA\nNA\nNA\nNA\nOwned\nOwned\nNo\nThrown into street, vacant land, or common area\nNo toilet\n1\n10\nPresent resident\nHead\nHead\n33\n30 to 34\nMale\nMarried/in union\nMarried, monogamous\n1973\nBurkina Faso\nBurkina Faso\nMuslim\nMuslim\nNo, never attended\nNo, illiterate\nLess than primary completed\nNo schooling\nEmployed\nEmployed, not specified\nYes, in the labor force\nNo, not disabled\nNo\nNo\n\n\nBurkina Faso\n2006\nBurkina Faso 2006\n2000\n5\n10\nRural\nWestern Africa\n854001\n854001013\nNA\nNA\nBoucle du Mouhoun\nKossi\nNA\nNA\nNA\nNA\nNA\nNA\nOwned\nOwned\nNo\nThrown into street, vacant land, or common area\nNo toilet\n2\n10\nPresent resident\nSpouse/partner\nSpouse/partner\n23\n20 to 24\nFemale\nMarried/in union\nMarried, monogamous\n1983\nBurkina Faso\nBurkina Faso\nMuslim\nMuslim\nNo, never attended\nNo, illiterate\nLess than primary completed\nNo schooling\nEmployed\nEmployed, not specified\nYes, in the labor force\nNo, not disabled\nNo\nNo\n\n\nBurkina Faso\n2006\nBurkina Faso 2006\n2000\n5\n10\nRural\nWestern Africa\n854001\n854001013\nNA\nNA\nBoucle du Mouhoun\nKossi\nNA\nNA\nNA\nNA\nNA\nNA\nOwned\nOwned\nNo\nThrown into street, vacant land, or common area\nNo toilet\n3\n10\nPresent resident\nChild\nChild\n2 years\n0 to 4\nMale\nSingle/never married\nSingle/never married\n2004\nBurkina Faso\nBurkina Faso\nMuslim\nMuslim\nNIU (not in universe)\nNIU (not in universe)\nNIU (not in universe)\nNIU (not in universe)\nNIU (not in universe)\nNIU (not in universe)\nNIU (not in universe)\nNo, not disabled\nNo\nNo"
  },
  {
    "objectID": "d01_03_import_geometries.html",
    "href": "d01_03_import_geometries.html",
    "title": "3  Données géométriques",
    "section": "",
    "text": "Un des grands avantages d’IPUMS International pour l’EE CIST 2023 est constitué par la mise à disposition de fonds de carte au format shapefile dont les codes correspondent avec les variables individuelles poue deux niveaux administratifs en dessous du nivau national. On peut donc théoriquement agréger les données individuelles, en déduire des indicateurs agrégés à deux niveaux administratifs différents et en faire la cartographie. L’objectif de cette note est de vérifier que tout ceci fonctionne bien et que les fonds de carte sont de bonne qualité."
  },
  {
    "objectID": "d01_03_import_geometries.html#cas-de-recensements-isolé",
    "href": "d01_03_import_geometries.html#cas-de-recensements-isolé",
    "title": "3  Données géométriques",
    "section": "3.1 Cas de recensements isolé",
    "text": "3.1 Cas de recensements isolé\nLe premier cas concerne la géométrie d’un recensement précis relatif à un seul pays et une seule date. Par exemple la géométrie du Togo lors du RP 2010.\n\n3.1.1 Accès aux données\nUne fois que vous êtes connecté en tant qu’utilisateur, vous pouvez accéder aux données géométriques en cliquant dans la barre latérale gauche sur le lien “GEOGRAPHY & GIS” :\n\n\n\nLien vers les données géométriques\n\n\nCe dernier vous conduit à une page comportant de nombreuses possibilités d’obtention de données géométriques pour chacun des recensements de tous les pays à toutes les dates. On utilisera ici uniquement les géométries associées aux données de recensement, mais la page offre d’autres possibilités, notamment pour la constitution de découpages à plusieurs dates ou pour les liens vers les données DHS. Pour assurer une correspondance exacte avec les données de recensement, on utilise uniquement les shapefile correspondant aux indicateurs contenus dans les données individuelles :\n\n\n\nLien vers les données géométriques\n\n\nSur chacune des deux pages on va ensuite télécharger les fonds de carte qui correspondent à des dossiers au format .zip ce qui en réduit la taille. On les décompressera uniquement au moment de leur importation vers R, Qgis ou Geoda.\nAu total nous devons récupérer 10 fichiers correspondant aux 2 niveaux de découpages de chacun des 5 recensements pour lesquels nous avons collecté des échantillons de données individuelles.\n - N.B. Chaque fichier correspond à une date précise et un pays précis. Dans le cas d’un pays dont les régions ont change, il faut télécharger autant de fichiers qu’il y a de géométries différentes. Précisons par ailleurs que les fonds de carte proposés sont assez généralisées et ne se prête pas à des opérations précises de repérage de terrain : ils ne servent qu’à visualiser les résultats de recensement.\nLes fichiers obtenus sont directement utilisables par Qgis ou GeoDa mais ils doivent être convertis au format sf pour être utilisés dans R. On peut utiliser pour cela un programme qui automatise la tâche du type de celui qui est présenté ci-dessous pour le Burkina et qui sera ensuite appliqué à tous les autres recensements :\n\n\n3.1.2 Bénin RP 2013\n\nlibrary(sf)\ncensus=\"bj2013\"\n\nunzip(paste0(\"ipums/geom/geo1_\",census,\".zip\"), exdir=\"ipums/geom/tmp\")\nmap1<-st_read(paste0(\"ipums/geom/tmp/geo1_\",census,\".shp\"),quiet=T)\nsaveRDS(map1,paste0(\"ipums/geom/geo1_\",census,\".RDS\"))\n\nunzip(paste0(\"ipums/geom/geo2_\",census,\".zip\"), exdir=\"ipums/geom/tmp\")\nmap2<-st_read(paste0(\"ipums/geom/tmp/geo2_\",census,\".shp\"),quiet=T)\nsaveRDS(map2,paste0(\"ipums/geom/geo2_\",census,\".RDS\"))\n\npar(mar=c(0,0,2,0))\nplot(map2$geometry, col=\"lightyellow\", border=\"gray80\", lwd=0.4, main=census)\nplot(map1$geometry,add=T, col=NA, border = \"black\",lwd=0.8)\n\n\n\n\n\n\n3.1.3 Burkina Faso RP 2006\n\n\n\n\n\n\n\n3.1.4 Mali RP 2009\n\n\n\n\n\n\n\n3.1.5 Sénégal RP 2013\n\n\n\n\n\n\n\n3.1.6 Togo RP 2010"
  },
  {
    "objectID": "d01_03_import_geometries.html#géométries-harmonisées-dans-le-temps",
    "href": "d01_03_import_geometries.html#géométries-harmonisées-dans-le-temps",
    "title": "3  Données géométriques",
    "section": "3.2 Géométries harmonisées dans le temps",
    "text": "3.2 Géométries harmonisées dans le temps\nIPUMS propose pour chaque pays des géométries harmonisées permettant de comparer les situations à plusieurs dates et, du même coup, de procéder à des analyses de migrations. La résolution spatiale est évidemment plus faible mais l’intérêt beaucoup plus grand si l’on souhaite par exemple construire des séries chronologiques ou étudier les migrations entre deux dates. L’inconvénient est évidemment d’aboutir parfois à des unités administratives fictives qui sont un compromis entre plusieurs redécoupages.\n\n3.2.1 Accès aux données\nLa procédure est la même que précédemment mais en suivant un autre chemin pour accéder aux fonds de carte harmonisés dans le temps. Le lien avec les données individuelles de recnsement sera désormais effectué à l’aide de codes standard portant les noms respectifs de GEOLEV1 et GEOLEV2.\n\n\n\nLien vers les données géométriques harmonisées\n\n\nPour les pays qui n’ont pas connu de changement administratif, les données harmonisées correspondent au données du dernier recensement (Bénin). Dans le cas où il y a eu des fragmentations mais sans remise en cause des limites, le découpage harmonisé sera en général celui d’un recensement plus ancien (Sénégal). Enfin, dans le cas où le redécoupage conduit à des découpages avec interesections, il faut agréger les unités problématiques en ensembles plus vastes qui ne correspondent à aucune date précise de recensement (Togo). Lorsqu’un recensement est manifestement non compatible avec les précédents, IPUMS renonce à chercher un plus petit commun dénominateur\n\n\n3.2.2 Bénin harmonisé : RP 1979, 1992, 2002 & 2013\n\n\n\n\n\n\nValidation ? : à faire par les formateurs du pays concernés\n\n\n\n3.2.3 Burkina Faso harmonisé : RP 1996 & 2006\n\n\n\n\n\n\nValidation ? : à faire par les formateurs du pays concernés\n\n\n\n3.2.4 Mali harmonisé : RP 1987, 1998 & 2009\n\n\n\n\n\n\nValidation ? : à faire par les formateurs du pays concernés\n\n\n\n3.2.5 Sénégal harmonisé : RP 1988, 2002 & 2013\n\n\n\n\n\n\nValidation ? : à faire par les formateurs du pays concernés\n\n\n\n3.2.6 Togo harmonisé : RP 1970 & 2010\nDans le cas du Togo, il n’est pas possible d’harmoniser le niveau géographique II entre les différentes dates de recensement. Le seul découpage haronisé concerne le niveau I mais il réduit le pays à trois régions seulement. On peut donc estimer que, dans ce cas il n’est pas vraiment possible de constituer des séries chronologiques.\n\n\n\n\n\n\nValidation ? : à faire par les formateurs du pays concernés"
  },
  {
    "objectID": "d02_00_indicateurs_introduction.html",
    "href": "d02_00_indicateurs_introduction.html",
    "title": "COMPARAISONS DE PAYS",
    "section": "",
    "text": "La seconde étape du travail est la création d’indicateurs territoriaux décrivant les unités administratives des différents pays à chacun des deux niveaux d’analyse géographique. Ces indicateurs territoriaux peuvent être obtenus de plusieurs façons et on se limitera ici à quelques exemples. Le point essentiel est quel les méthodes utilisées pour créer ces indicateurs soient bien reproductibles pour chacun des recensements analysés."
  },
  {
    "objectID": "d02_01_indicateurs_popsup.html",
    "href": "d02_01_indicateurs_popsup.html",
    "title": "4  Population, surface, densité",
    "section": "",
    "text": "Le premier exemple de création d’indicateur concerne l’établissement de cartes de densité ce qui suppose de mobiliser à la fois les données individuelles (pour agréger la population) et les données géographiques (pour calculer la superficie)."
  },
  {
    "objectID": "d02_01_indicateurs_popsup.html#agrégation-de-la-population",
    "href": "d02_01_indicateurs_popsup.html#agrégation-de-la-population",
    "title": "4  Population, surface, densité",
    "section": "4.1 Agrégation de la population",
    "text": "4.1 Agrégation de la population\nUne question intéressante concerne la marge d’erreur du calcul des populations selon que l’on part d’un échantillon plus ou moins dense (ici, à 1 pct ou 10 pct). Ce point méritera d’être discuté avec les spécialistes de statistique inférentielle du projet. Nous nous bornerons ici à calculer les indicateurs tirés de l’échantillon à 10%\nOn calcule pour chacune des unités territoriales de niveau I ou II la somme des individus pondérée par le poids des individus (PERWT) et on stocke le résultat dans un dossier commun à tous les recensments appelés all. Ceci évitera d’avoir à refaire le calcul dans les étapes suivantes.\n\n## Chargement des données\nrp <-readRDS(file = \"ipums/rp/rp_fivecountries_samp10pct.RDS\")\n\n## Calcul des populations au niveau administratif I\npop1<-rp      %>% group_by(GEOLEV1) %>% \n                  summarise(POP=sum(PERWT))  %>%\n                  mutate(GEOLEV1 = as.character(GEOLEV1))\nsaveRDS(pop1, \"indic/all/POP_LEV1.RDS\")\n\n## Calcul des populations au niveau administratif II\npop2<-rp      %>% group_by(GEOLEV2) %>% \n                  summarise(POP=sum(PERWT))  %>%\n                  mutate(GEOLEV2 = as.character(GEOLEV2))\nsaveRDS(pop2, \"indic/all/POP_LEV2.RDS\")"
  },
  {
    "objectID": "d02_01_indicateurs_popsup.html#jointure-avec-les-géométries",
    "href": "d02_01_indicateurs_popsup.html#jointure-avec-les-géométries",
    "title": "4  Population, surface, densité",
    "section": "4.2 Jointure avec les géométries",
    "text": "4.2 Jointure avec les géométries\nOn va maintenant procéder à la jointure des données avec les fonds de carte puis stocker ces derniers enrichis par la population au format sf. On crée pour cela une procédure semi-automatique qu’on va applique au RP Bénin 2013 et qui sera ensuite répliquée sur les autres recensements étudiés.\n\n4.2.1 Bénin, RP 2013\n\nlibrary(sf)\ncensus=\"bj2013\"\nrefmap=\"bj1979_2013\"\n\n# --------------- Niveau administratif I ----------------------\n\n## Load population\npop1<-readRDS(\"indic/all/POP_LEV1.RDS\")\n## Read Geometry and create code\nmap1<-readRDS(paste0(\"ipums/geom/geo1_\", refmap,\".RDS\")) %>% rename(GEOLEV1=GEOLEVEL1)\n\n## Join\nmapdon1<-left_join(map1,pop1) %>% select(code = GEOLEV1,\n                                         nom  = ADMIN_NAME,\n                                         pays = CNTRY_NAME,\n                                         pop = POP,\n                                         geometry = geometry)%>%\n                                  filter(nom !=\"Unknown\") %>%\n                                  st_make_valid()\n## Save\nsaveRDS(mapdon1,paste0(\"indic/\",census,\"/\",\"pop_lev1_\",census,\".RDS\"))\n\n# --------------- Niveau administratif II ----------------------                            ## Load population\npop2<-readRDS(\"indic/all/POP_LEV2.RDS\")\n## Read Geometry and create code\nmap2<-readRDS(paste0(\"ipums/geom/geo2_\", refmap,\".RDS\")) %>% rename(GEOLEV2=GEOLEVEL2)\n## Join\nmapdon2<-left_join(map2,pop2) %>% select(code = GEOLEV2,\n                                         nom  = ADMIN_NAME,\n                                         pays = CNTRY_NAME,\n                                         pop = POP,\n                                         geometry = geometry)%>%\n                                  filter(nom !=\"Unknown\") %>%\n                                  st_make_valid()\n## Save\nsaveRDS(mapdon2,paste0(\"indic/\",census,\"/\",\"pop_lev2_\",census,\".RDS\"))\n\n\n\n# Vérification\npar(mfrow=c(1,2))\nmf_map(mapdon1, type=\"base\", col=\"lightyellow\")\nmf_map(mapdon1,type=\"prop\", var=\"pop\",inches = 0.1)\nmf_layout(title = paste(census,\"- Population au niveau I\"),\n          credits = \"Source :  IPUMS, 2020 & INS Benin, 2013\",\n          scale = FALSE, arrow=FALSE)\nmf_map(mapdon2, type=\"base\", col=\"lightyellow\")\nmf_map(mapdon2,type=\"prop\", var=\"pop\",inches = 0.1)\nmf_layout(title = paste(census,\"- Population au niveau II\"),\n          credits = \"Source :  IPUMS, 2020 & INS Benin, 2013\",\n          scale = FALSE, arrow=FALSE)\n\n\n\n\n\n\n4.2.2 Burkina Faso, RP 2006\n\n\n\n\n\n\n\n4.2.3 Mali, RP 2009\n\n\n\n\n\n\nN.B. : il a fallu supprimer un polygone vide concernant les valeurs “Unknown” et réparer la géométrie d’une unité en appliquant la fonction st_make_valid() du package sf.\n\n\n\n4.2.4 Togo, RP 2010\n\n\n\n\n\n\nN.B. : il a fallu supprimer un polygone vide concernant les valeurs “Unknown” et réparer la géométrie d’une unité en appliquant la fonction st_make_valid() du package sf.\n\n\n\n4.2.5 Sénégal, RP 2013"
  },
  {
    "objectID": "d02_01_indicateurs_popsup.html#calcul-des-superficies-et-densités",
    "href": "d02_01_indicateurs_popsup.html#calcul-des-superficies-et-densités",
    "title": "4  Population, surface, densité",
    "section": "4.3 Calcul des superficies et densités",
    "text": "4.3 Calcul des superficies et densités\nMaintenant que les variables de population sont incluses dans un fichier sf, on peut y ajouter la superficie à l’aide d’un simple calcul géométrique et en déduire la densité de population des unités territoriales. Le calcul des superficies est évidemment légèrement entaché d’erreur puisqu’il dépend de la précision du fonds de carte. Ainis, dans le cas Bénin, nous trouvons une superficie de 115768 km2 alors que la valeur donnée par la Banque Mondiale est de 114760 km2.\nLes fichiers sont exportés au à la fois au format sf (en .RDS) et au format shapefile pour servir de point de départ à l’ensemble des analyses cartographiques ultérieures.\n\n4.3.1 RP Bénin, 2013\n\nlibrary(sf)\ncensus=\"bj2013\"\n\n# calcul des indicateurs au niveau I\nmap1<-readRDS(paste0(\"indic/\",census,\"/\",\"pop_lev1_\",census,\".RDS\"))\nmap1$sup<-as.numeric(st_area(map1)/(1000*1000))\nmap1$den<- map1$pop/map1$sup\nsaveRDS(map1, paste0(\"indic/\",census,\"/\",\"map_lev1_\",census,\".RDS\"))\nst_write(map1, paste0(\"indic/\",census,\"/\",\"map_lev1_\",census,\".shp\"),delete_dsn = T, quiet=T)\n\n# calcul des indicateurs au niveau II\nmap2<-readRDS(paste0(\"indic/\",census,\"/\",\"pop_lev2_\",census,\".RDS\"))\nmap2$sup<-as.numeric(st_area(map2)/(1000*1000))\nmap2$den<- map2$pop/map2$sup\nsaveRDS(map2, paste0(\"indic/\",census,\"/\",\"map_lev2_\",census,\".RDS\"))\nst_write(map2, paste0(\"indic/\",census,\"/\",\"map_lev2_\",census,\".shp\"),delete_dsn = T, quiet=T)\n\n# Vérification\n\nmybreaks=c(0,5,10,20,40,80,160,320,10000)\nmycols = brewer.pal(8,\"YlOrBr\")\npar(mfrow=c(1,2))\nmf_map(map1,type=\"choro\", \n            var=\"den\",\n            breaks=mybreaks,\n            pal=mycols,\n            leg_title = \"hab./km2\",\n            leg_val_rnd = 0)\nmf_layout(title = paste(census,\"- Densite de population au niveau I\"),\n          credits = \"Sources :  IPUMS, 2020 & INS Bénin,2013\",\n          scale = FALSE, arrow=FALSE)\nmf_map(map2,type=\"choro\", \n            var=\"den\",\n            breaks=mybreaks,\n            pal=mycols,\n            leg_title = \"hab./km2\",\n            leg_val_rnd = 0,\n             lwd=0.3,\n             border = \"gray80\")\nmf_map(map1,type=\"base\", \n            add=T,\n            lwd=1,\n            col = NA,\n            border=\"black\")\nmf_layout(title = paste(census,\"- Densite de population au niveau II\"),\n          credits = \"Sources :  IPUMS, 2020 & INS Bénin,2013\",\n          scale = FALSE, arrow=FALSE)\n\n\n\n\n\n\n4.3.2 RP Burkina Faso, 2006\n\n\n\n\n\n\n\n4.3.3 RP Mali, 2009\n\n\n\n\n\n\n\n4.3.4 RP Sénégal, 2013\n\n\n\n\n\n\n\n4.3.5 RP Togo, 2010"
  },
  {
    "objectID": "d02_01_indicateurs_popsup.html#cartogrammes-démographiques",
    "href": "d02_01_indicateurs_popsup.html#cartogrammes-démographiques",
    "title": "4  Population, surface, densité",
    "section": "4.4 Cartogrammes démographiques",
    "text": "4.4 Cartogrammes démographiques\nNous procédons dans cette dernière étape à la création de cartogrammes où la surface des unité terrioriales est approximativement proportionelle à leur population à la date du recensement. L’opération de transformation est effectuée en dehors du logiciel R à l’aide du logiciel ScapeToad qui est l’un des plus performant. La transformation est réalisée sur le niveau administraif II puis celui-ci est agrégé dans R à l’aide du package sf pour reconstituer le niveau administratif I.\n\nN.B. : le calcul de l’anamorphose avec Scapetoad a été assez long et coûteux en calcul pour le Sénégal en raison de la complexité du tracé des limites. Un fonds généralisé est en général plus rapide à transformer.\n\n\n4.4.1 RP Bénin, 2013\n\ncensus = \"bj2013\"\n\n# Load level2 and remove columns created by scapetoad\ncartog2<-st_read(paste0(\"indic/\",census,\"/\",\"cartog_lev2_\",census,\".shp\"), quiet = T) %>%\n  select(code, nom, pays, pop, geometry)\nst_write(cartog2,paste0(\"indic/\",census,\"/\",\"cartog_lev2_\",census,\".shp\"),delete_dsn = T , quiet = T)\n\n# agregate level2 to level 1\ncartog1 <- cartog2 %>% mutate(code2 = code, code=substr(code2,1,6))%>%\n              select(code, geometry) %>%\n              group_by(code) %>%\n              summarize() %>% st_as_sf() %>%\n              st_buffer( dist=0.001)\n\n# load attribute from level1\ndon1<-st_read(paste0(\"indic/\",census,\"/\",\"map_lev1_\",census,\".shp\"), quiet = T) %>% st_drop_geometry()\ncartog1 <- don1 %>% right_join(cartog1) %>% st_as_sf() %>% select(code, nom, pays, pop, geometry)\nst_write(cartog1,paste0(\"indic/\",census,\"/\",\"cartog_lev1_\",census,\".shp\"),delete_dsn = T , quiet = T)\n\n# Vérification\n\npar(mfrow=c(1,2))\nmf_map(cartog1, type=\"base\", col=\"lightyellow\")\nmf_map(cartog1,type=\"prop\", var=\"pop\",inches = 0.1)\nmf_layout(title = paste(census,\"- Cartogramme  au niveau I\"),\n          credits = \"Source :  IPUMS, 2020 & INS Benin, 2013\",\n          scale = FALSE, arrow=FALSE)\nmf_map(cartog2, type=\"base\", col=\"lightyellow\")\nmf_map(cartog2,type=\"prop\", var=\"pop\",inches = 0.1)\nmf_layout(title = paste(census,\"- Cartogramme au niveau II\"),\n          credits = \"Source :  IPUMS, 2020 & INS Benin, 2013\",\n          scale = FALSE, arrow=FALSE)\n\n\n\n\n\n\n4.4.2 RP Burkina Faso, 2006\n\n\n\n\n\n\n\n4.4.3 RP Mali, 2009\n\n\n\n\n\n\n\n4.4.4 RP Sénégal, 2013\n\n\n\n\n\n\n\n4.4.5 RP Togo, 2010"
  },
  {
    "objectID": "d02_02_indicateurs_equipt.html",
    "href": "d02_02_indicateurs_equipt.html",
    "title": "5  Equipement des ménages",
    "section": "",
    "text": "library(knitr)\nlibrary(dplyr, warn.conflicts = FALSE)\noptions(dplyr.summarise.inform = FALSE)\nlibrary(sf,quietly = T)\nlibrary(mapsf)\nlibrary(RColorBrewer)\nlibrary(haven)"
  },
  {
    "objectID": "d02_02_indicateurs_equipt.html#agrégation-des-ménages",
    "href": "d02_02_indicateurs_equipt.html#agrégation-des-ménages",
    "title": "5  Equipement des ménages",
    "section": "5.1 Agrégation des ménages",
    "text": "5.1 Agrégation des ménages\nNous allons prendre ici un exemple de calcul ou l’unité de compte est ménage et non pas l’individu. A titre d’exemple, on va calculer le nombre de ménages disposant d’électricité en écartant les données inconnues. Pour cela nous allons construire un programme qui effectue les tâches suivantes :\n\nne conserver que les chefs de ménage (RELATE == 1)\nécarter les cas où la variable n’est pas renseignée (ELECTRIC = 1 ou 2)\nagréger les données en pondérant par le poids des ménages (HHWT)\ncalculer le nombre total de ménages disponibles (nbmen)\ncalculer l part des ménages équipés (pct)\n\n\n## Chargement des données\nrp <-readRDS(file = \"ipums/rp/rp_fivecountries_samp10pct.RDS\")\n# Convertit les variables haven_labelled en factors\nrp<-as_factor(rp, only_labelled=T)\n\ntable(rp$ELECTRIC)\n## Calcul  au niveau administratif I\nmen1<-rp      %>%  group_by(GEOLEV1, ELECTRIC) %>%\n                   filter(RELATE == 1, ELECTRIC %in% c(1,2)) %>%\n                   summarise(N=sum(HHWT))  %>%\n                   mutate(GEOLEV1 = as.character(GEOLEV1)) %>%\n                   reshape2::dcast(formula = GEOLEV1~ELECTRIC,value.var = \"N\") %>%\n                   rename(code=GEOLEV1,ELEC_oui=2,ELEC_non=3) %>%\n                   mutate(ELEC_tot = ELEC_oui+ELEC_non,\n                          ELEC_pct = 100* ELEC_oui/ELEC_tot)%>%\n                   select(code, ELEC_tot,ELEC_oui,ELEC_non,ELEC_pct)\n\nsaveRDS(men1, \"indic/all/MEN_ELEC_LEV1.RDS\")\n\n## Calcul  au niveau administratif II\nmen2<-rp      %>%  group_by(GEOLEV2, ELECTRIC) %>%\n                   filter(RELATE == 1) %>%\n                   summarise(N=sum(HHWT))  %>%\n                   mutate(GEOLEV2 = as.character(GEOLEV2)) %>%\n                   reshape2::dcast(formula = GEOLEV2~ELECTRIC,value.var = \"N\") %>%\n                     rename(code=GEOLEV2,ELEC_oui=2,ELEC_non=3) %>%\n                   mutate(ELEC_tot = ELEC_oui+ELEC_non,\n                          ELEC_pct = 100* ELEC_oui/ELEC_tot)%>%\n                   select(code, ELEC_tot,ELEC_oui,ELEC_non,ELEC_pct)\n\nsaveRDS(men2, \"indic/all/MEN_ELEC_LEV2.RDS\")"
  },
  {
    "objectID": "d02_02_indicateurs_equipt.html#ajout-de-la-géométrie",
    "href": "d02_02_indicateurs_equipt.html#ajout-de-la-géométrie",
    "title": "5  Equipement des ménages",
    "section": "5.2 Ajout de la géométrie",
    "text": "5.2 Ajout de la géométrie\nNous procédons ensuite à la jointure avec les fonds de carte afin de pouvoir ajouter les métadonnées qui y sont présentes et aboutir à une visualisation cartographique. Le résultat sera stocké au format sf et au format shapefile afin de pouvoir être réutilisé dans d’autres applications en dehors de R (Magrit, Geoda; …).\nA titre d’exemple, nous allons utiliser les fonds de carte simple et les cartogrammes mis au point dans la partie précédente.\n\n5.2.1 RP Bénin, 2013\n\nlibrary(sf)\ncensus=\"bj2013\"\n\n# Jointure au niveau I\nmen1<-readRDS(\"indic/all/MEN_ELEC_LEV1.RDS\")\nmap1<-readRDS(paste0(\"indic/\",census,\"/\",\"map_lev1_\",census,\".RDS\")) \nmapdon1 <- left_join(map1,men1) %>% select(code,nom, pays, ELEC_tot, ELEC_oui,ELEC_non, ELEC_pct, geometry)\nsaveRDS(mapdon1, paste0(\"indic/\",census,\"/\",\"elec_lev1_\",census,\".RDS\"))\nst_write(mapdon1, paste0(\"indic/\",census,\"/\",\"elec_lev1_\",census,\".shp\"),delete_dsn = T, quiet=T)\n\n# Jointure au niveau II\nmen2<-readRDS(\"indic/all/MEN_ELEC_LEV2.RDS\")\nmap2<-readRDS(paste0(\"indic/\",census,\"/\",\"map_lev2_\",census,\".RDS\")) \nmapdon2 <- left_join(map2,men2) %>% select(code,nom, pays, ELEC_tot, ELEC_oui,ELEC_non, ELEC_pct, geometry)\nsaveRDS(mapdon2, paste0(\"indic/\",census,\"/\",\"elec_lev2_\",census,\".RDS\"))\nst_write(mapdon2, paste0(\"indic/\",census,\"/\",\"elec_lev2_\",census,\".shp\"),delete_dsn = T, quiet=T)\n\n# Vérification\n\nmybreaks=c(0,1,2,4,8,16,32, 64,100)\nmycols = brewer.pal(8,\"YlOrBr\")\npar(mfrow=c(1,2))\nmf_map(mapdon1,type=\"choro\", \n            var=\"ELEC_pct\",\n            breaks=mybreaks,\n            pal=mycols,\n            leg_title = \"% ménages\",\n            leg_val_rnd = 0)\nmf_layout(title = paste(census,\"- Electrification au niveau I\"),\n          credits = \"Sources :  IPUMS, 2020 & INS Bénin,2013\",\n          scale = FALSE, arrow=FALSE)\nmf_map(mapdon2,type=\"choro\", \n            var=\"ELEC_pct\",\n            breaks=mybreaks,\n            pal=mycols,\n            leg_title = \"% ménages\",\n            leg_val_rnd = 0,\n             lwd=0.3,\n             border = \"gray80\")\nmf_map(map1,type=\"base\", \n            add=T,\n            lwd=1,\n            col = NA,\n            border=\"black\")\nmf_layout(title = paste(census,\"- Electrification au niveau II\"),\n          credits = \"Sources :  IPUMS, 2020 & INS Bénin,2013\",\n          scale = FALSE, arrow=FALSE)\n\n\n\n\n\n\n5.2.2 RP Burkina Faso, 2006\n\n\n\n\n\n\n\n5.2.3 RP Mali, 2009\n\n\n\n\n\n\n\n5.2.4 RP Sénégal, 2013\n\n\n\n\n\n\n\n5.2.5 RP Togo, 2010\n\n\n\n\n\n\nCommentaire : dans le cas du Togo, il serait préférable d’utiliser le niveau administratif I de l’année 2010 plutôt que le niveau harmonisé 1970-2010 qui réduit le pays à 3 régions seulement."
  },
  {
    "objectID": "d02_02_indicateurs_equipt.html#prolongements",
    "href": "d02_02_indicateurs_equipt.html#prolongements",
    "title": "5  Equipement des ménages",
    "section": "5.3 Prolongements",
    "text": "5.3 Prolongements\nOn peut facilement adapter le programme précédent pour construire de nombeux autres indicateurs d’équipements des ménages.\nOn peut également lorsque les données le permettent, construire pour un pays une séquence d’évolution d’un indicateur à plusieurs dates."
  },
  {
    "objectID": "d02_03_indicateurs_tabcont.html",
    "href": "d02_03_indicateurs_tabcont.html",
    "title": "6  Sexe, âge et urbanité",
    "section": "",
    "text": "library(knitr)\nlibrary(dplyr, warn.conflicts = FALSE)\noptions(dplyr.summarise.inform = FALSE)\nlibrary(sf, quietly=T)\nlibrary(mapsf)\nlibrary(RColorBrewer)\nlibrary(haven)\nlibrary(tidyr,quietly = T,warn.conflicts = FALSE)\noptions(tidyr.summarise.inform = FALSE)\nlibrary(FactoMineR)\nlibrary(explor)\nNous allons prendre ici un exemple de croisement de trois indicateurs classiques auquels on ajoute une dimension territoriale :\nOn y ajoute deux autres variables facilitant le tri ultérieur du tableau\nAprès avoir stocké le tableau de contingence en format “long” ou “large” on donne un exemple d’utilisation avec la réalisation d’une analyse factorielle des correspondance (AFC) et une classification ascendante hiararchique (CAH) sur la structure par âge et par sexe des populations au niveau administratif I."
  },
  {
    "objectID": "d02_03_indicateurs_tabcont.html#création-des-tableaux",
    "href": "d02_03_indicateurs_tabcont.html#création-des-tableaux",
    "title": "6  Sexe, âge et urbanité",
    "section": "6.1 Création des tableaux",
    "text": "6.1 Création des tableaux\nLa première étape consiste à établir des tableaux croisés qui énumèrent tous les croisements possibles en ayant retirer les individus auxquels il manque une des caractéristique. Il s’agit en général d’un petit nombre de cas.\n\n6.1.1 niveau I\n\n## Chargement des données\nrp <-readRDS(file = \"ipums/rp/rp_fivecountries_samp10pct.RDS\")\n\n## Création des classes d'âges\nrp$AGE3<-cut(rp$AGE,c(0,14,59,100))\nlevels(rp$AGE3)<-c(\"0014\",\"1559\",\"60XX\")\n\n\n## Calcul  au niveau administratif I\ntc1 <-rp      %>%  filter(URBAN !=9)%>%\n                  group_by(COUNTRY, YEAR,GEOLEV1, AGE3, SEX, URBAN) %>%\n                   summarise(N=sum(PERWT)) %>%\n                  as_factor(only_labelled=T)\n\nsaveRDS(tc1, \"indic/all/GEOLEV1_POP_AGE_SEX_URB_long.RDS\")\n\nkable(head(tc1))\n\n\n\n\nCOUNTRY\nYEAR\nGEOLEV1\nAGE3\nSEX\nURBAN\nN\n\n\n\n\nBenin\n2013\n204001\n0014\nMale\nRural\n165950\n\n\nBenin\n2013\n204001\n0014\nMale\nUrban\n49390\n\n\nBenin\n2013\n204001\n0014\nFemale\nRural\n157890\n\n\nBenin\n2013\n204001\n0014\nFemale\nUrban\n47670\n\n\nBenin\n2013\n204001\n1559\nMale\nRural\n137410\n\n\nBenin\n2013\n204001\n1559\nMale\nUrban\n50210\n\n\n\n\n\nCe tableau qui est au format “long” est pratique pour certaines application mais pas pour d’autres où l’on préférera un format “large”. On va donc le transformer en une seconde version qui conserve les valeurs mais les range différemment dans les colonnes. Dans ce nouveau format le nom des colonnes permet de repérer le croisement opéré (e.g. HU0014 est la population d’hommes résidant en milieu urbain d’âge 0-14 ans, FR85XX est la population de femmes de 85ans et plus résidant en milieu rural, etc)\n\nlibrary(tidyr)\n\nHU <- tc1 %>% filter(SEX==\"Male\", \n                     URBAN == \"Urban\", \n                     is.na(AGE3)==F) %>% \n              group_by(COUNTRY, YEAR, GEOLEV1, AGE3) %>%\n              summarise(N=sum(N)) %>%\n              pivot_wider(id_cols = c(COUNTRY, YEAR,GEOLEV1),\n                          names_from = AGE3,\n                          values_from = N,\n                          names_prefix = \"HU\",\n                          values_fill = 0)\n\nHR <- tc1 %>% filter(SEX==\"Male\", \n                     URBAN == \"Rural\", \n                     is.na(AGE3)==F) %>% \n              group_by(COUNTRY, YEAR, GEOLEV1, AGE3) %>%\n              summarise(N=sum(N)) %>%\n              pivot_wider(id_cols =  c(COUNTRY, YEAR,GEOLEV1),\n                          names_from = AGE3,\n                          values_from = N,\n                          names_prefix = \"HR\",   \n                          values_fill = 0)\n\nFU <- tc1 %>% filter(SEX==\"Female\", \n                     URBAN == \"Urban\", \n                     is.na(AGE3)==F) %>% \n              group_by(COUNTRY, YEAR, GEOLEV1, AGE3) %>%\n              summarise(N=sum(N)) %>%\n              pivot_wider(id_cols =  c(COUNTRY, YEAR,GEOLEV1),\n                          names_from = AGE3,values_from = N,\n                          names_prefix = \"FU\",  \n                          values_fill = 0)\n\nFR <- tc1 %>% filter(SEX==\"Female\", \n                     URBAN == \"Rural\", \n                     is.na(AGE3)==F) %>% \n              group_by(COUNTRY, YEAR, GEOLEV1, AGE3) %>%\n              summarise(N=sum(N)) %>%\n              pivot_wider(id_cols =  c(COUNTRY, YEAR,GEOLEV1),\n                          names_from = AGE3,\n                          values_from = N,\n                          names_prefix = \"FR\", \n                          values_fill = 0)\n\ntab1<-HU %>% left_join(HR) %>% left_join(FU) %>% left_join(FR) \n\n# fill missinv values <ith 0\ntab1[,4:15][is.na(tab1[,4:15])]<-0\n\nsaveRDS(tab1, \"indic/all/GEOLEV1_POP_AGE_SEX_URB_wide.RDS\")\n\nkable(head(tab1))\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCOUNTRY\nYEAR\nGEOLEV1\nHU0014\nHU1559\nHU60XX\nHR0014\nHR1559\nHR60XX\nFU0014\nFU1559\nFU60XX\nFR0014\nFR1559\nFR60XX\n\n\n\n\nBenin\n2013\n204001\n49390\n50210\n4130\n165950\n137410\n12640\n47670\n52460\n3410\n157890\n149560\n11090\n\n\nBenin\n2013\n204002\n66620\n63400\n6060\n123840\n96870\n12560\n63960\n71810\n7070\n114090\n114290\n12950\n\n\nBenin\n2013\n204003\n117440\n167670\n9720\n174430\n182190\n15420\n117500\n176970\n12240\n163070\n200670\n21010\n\n\nBenin\n2013\n204004\n113560\n130850\n9820\n174430\n143420\n13050\n111430\n134350\n9970\n167980\n155680\n11920\n\n\nBenin\n2013\n204005\n40240\n48300\n4430\n121210\n116610\n12030\n40570\n52520\n6000\n109360\n128400\n13600\n\n\nBenin\n2013\n204006\n46070\n45050\n3660\n129190\n102010\n10370\n45070\n55030\n5550\n126380\n139970\n15150\n\n\n\n\n\n\n\n6.1.2 niveau II\nOn reprend les mêmes procédure exactement, en changeant juste le niveau d’agrégation territoriale\n\n\n\n\n\nCOUNTRY\nYEAR\nGEOLEV2\nAGE3\nSEX\nURBAN\nN\n\n\n\n\nBenin\n2013\n204001001\n0014\nMale\nRural\n53610\n\n\nBenin\n2013\n204001001\n0014\nMale\nUrban\n8980\n\n\nBenin\n2013\n204001001\n0014\nFemale\nRural\n49690\n\n\nBenin\n2013\n204001001\n0014\nFemale\nUrban\n8420\n\n\nBenin\n2013\n204001001\n1559\nMale\nRural\n44210\n\n\nBenin\n2013\n204001001\n1559\nMale\nUrban\n8760\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCOUNTRY\nYEAR\nGEOLEV2\nHU0014\nHU1559\nHU60XX\nHR0014\nHR1559\nHR60XX\nFU0014\nFU1559\nFU60XX\nFR0014\nFR1559\nFR60XX\n\n\n\n\nBenin\n2013\n204001001\n8980\n8760\n700\n53610\n44210\n4120\n8420\n9580\n720\n49690\n47900\n3950\n\n\nBenin\n2013\n204001002\n2990\n3050\n170\n26320\n21800\n1960\n3260\n3600\n280\n25580\n23820\n1930\n\n\nBenin\n2013\n204001003\n12230\n13610\n1090\n31110\n25230\n2160\n11480\n13460\n900\n30790\n28240\n1880\n\n\nBenin\n2013\n204001004\n2660\n3000\n210\n13030\n11640\n1010\n2480\n2680\n160\n12930\n12390\n880\n\n\nBenin\n2013\n204001005\n15730\n15600\n1480\n25800\n21500\n2070\n15060\n16800\n940\n24040\n23380\n1590\n\n\nBenin\n2013\n204001006\n6800\n6190\n480\n16080\n13030\n1320\n6970\n6340\n410\n14860\n13830\n860"
  },
  {
    "objectID": "d02_03_indicateurs_tabcont.html#utilisation-pédagogique",
    "href": "d02_03_indicateurs_tabcont.html#utilisation-pédagogique",
    "title": "6  Sexe, âge et urbanité",
    "section": "6.2 Utilisation pédagogique",
    "text": "6.2 Utilisation pédagogique\nOn peut tirer de nombreux indicateurs du tableau de contingence multiple pour des analyses univariées, bivariées ou multivariées. L’intérêt de ce type de tableau est leur compacité et leur faible taille comparativement au tableau inital des individus. Ils peuvent en particulier être utilisé pour des applications interactives de visualisaton développées sous Shiny où l’utilisateur pourra choisir par exemple de visualiser le % de jeunes, pour un pays donné, à une date donnée, pour un genre donné, en milieu rura ou urbai, etc."
  },
  {
    "objectID": "d03_00_mobil_introduction.html",
    "href": "d03_00_mobil_introduction.html",
    "title": "COMPARAISONS DANS LE TEMPS",
    "section": "",
    "text": "Nous focaliserons l’analyse sur la question des mobilités c’est à dire les migrations durée de vie, les dernières migrations ou les migrations internationales en partant d’indicateurs simples pour ensuite arriver à des mesures plus complexes d’interaction.\nComme dans la partie précédente il s’agit ici d’une analyse exploratoire à finalité pédagogique et non pas d’une analyse scientifique dans les règles de l’art. Le but est de repérer les cas où il est possible de répliquer une même analyse dans le temps sur trois ou qautre des recensements considérés."
  },
  {
    "objectID": "d03_01_mobil_data.html",
    "href": "d03_01_mobil_data.html",
    "title": "7  Préparation des données",
    "section": "",
    "text": "La méthode d’acquisitio des données est la même que celle qui a été décrite pour la comparaison des derniers recensements de cinq pays d’Afrique de l’Ouest mais la liste des variables est différente puisque l’objectif est ici d’analyser les mobilités des individus. Il est important de préciser pour chaque variable les définitions exactes et les métadonnées fournies par IPUMS concernant les procédures d’harmonisation entre les dates"
  },
  {
    "objectID": "d03_01_mobil_data.html#sélection-des-dates",
    "href": "d03_01_mobil_data.html#sélection-des-dates",
    "title": "7  Préparation des données",
    "section": "7.1 Sélection des dates",
    "text": "7.1 Sélection des dates\nEn cliquant sur le bouton “SELECT SAMPLES” on va tout d’abord choisir les recensements qui nous intéressent. On peut en retenir soit un seul soit plusieurs à la fois. Ici, nous avons retenu les quatre recensements du Bénin disponibles sur IPUMS.\n\n\n\nRecensements africains disponibles dans IPUMS International"
  },
  {
    "objectID": "d03_01_mobil_data.html#sélection-des-variables",
    "href": "d03_01_mobil_data.html#sélection-des-variables",
    "title": "7  Préparation des données",
    "section": "7.2 Sélection des variables",
    "text": "7.2 Sélection des variables\nNous avons effectué une sélection ciblée de variables en privilégiant celles qui concernent les individus et sont disponibles pour les quatre dates.\n\n\n\nListe de variables retenus pour les 4 recensements du Bénin\n\n\n\n\n\n\n\nType\nVariable\nLabel\n\n\n\n\nH\nCOUNTRY\nCountry\n\n\nH\nYEAR\nYear\n\n\nH\nSAMPLE\nIPUMS sample identifier\n\n\nH\nSERIAL\nHousehold serial number\n\n\nH\nHHWT\nHousehold weight\n\n\nH\nURBAN\nUrban-rural status\n\n\nH\nGEOLEV1\n1st subnational geographic level, world [consistent boundaries over time]\n\n\nH\nGEOLEV2\n2nd subnational geographic level, world [consistent boundaries over time]\n\n\nH\nELECTRIC\nElectricity\n\n\nH\nWATSUP\nWater supply\n\n\nP\nPERNUM\nPerson number\n\n\nP\nPERWT\nPerson weight\n\n\nP\nRESIDENT\nResidence status: de facto, de jure\n\n\nP\nRELATE (general)\nRelationship to household head [general version]\n\n\nP\nRELATED (detailed)\nRelationship to household head [detailed version]\n\n\nP\nAGE\nAge\n\n\nP\nAGE2\nAge, grouped into intervals\n\n\nP\nSEX\nSex\n\n\nP\nMARST (general)\nMarital status [general version]\n\n\nP\nMARSTD (detailed)\nMarital status [detailed version]\n\n\nP\nBIRTHYR\nYear of birth\n\n\nP\nCITIZEN\nCitizenship\n\n\nP\nBPLBJ1\nDepartment of birth, Benin\n\n\nP\nBPLBJ2\nCommune of birth, Benin\n\n\nP\nEDATTAIN (general)\nEducational attainment, international recode [general version]\n\n\nP\nEDATTAIND (detailed)\nEducational attainment, international recode [detailed version]\n\n\nP\nYRSCHOOL\nYears of schooling\n\n\nP\nEDUCBJ\nEducational attainment, Benin\n\n\nP\nEMPSTAT (general)\nActivity status (employment status) [general version]\n\n\nP\nEMPSTATD (detailed)\nActivity status (employment status) [detailed version]\n\n\nP\nLABFORCE\nLabor force participation\n\n\nP\nMIGRATEP\nMigration status, previous residence\n\n\nP\nMIGCTRYP\nCountry of previous residence\n\n\nP\nGEOMIG1_P\n1st subnational geographic level of previous residence, world [consistent boundaries over time]\n\n\nP\nMIGYRS1\nYears residing in current locality\n\n\nP\nMIG1_P_BJ\nDepartment of previous residence, Benin; consistent boundaries, GIS\n\n\nP\nMIG2_P_BJ\nCommune of previous residence, Benin; consistent boundaries, GIS"
  },
  {
    "objectID": "d03_01_mobil_data.html#choix-du-niveau-déchantillonage",
    "href": "d03_01_mobil_data.html#choix-du-niveau-déchantillonage",
    "title": "7  Préparation des données",
    "section": "7.3 Choix du niveau d’échantillonage",
    "text": "7.3 Choix du niveau d’échantillonage\nNous avons utilisé le niveau maximal d’échantillonage proposé soit 10% des individus à chaque date de recensement. Cela correspond évidememnt à des effectifs différents compte-tenu de la croissance démographique rapide du pays au cours de la période d’observation. On passe de 332000 individus en 1979 à plus d’un million en 2013 soit un triplement. On aurait pu décider d’utiliser un échantillon de même taille à chacune des dates mais nous avons préféré retenir l’effectif maximal à chaque date, sachant que cela implique des différences de précision dans les mesures.\n\n\n\nTaille des échantillons de recensement du Bénin fournis par IPUMS International"
  },
  {
    "objectID": "d03_01_mobil_data.html#récupération-des-fichiers",
    "href": "d03_01_mobil_data.html#récupération-des-fichiers",
    "title": "7  Préparation des données",
    "section": "7.4 Récupération des fichiers",
    "text": "7.4 Récupération des fichiers\nPour pouvoir charger ensuite les données dans R ou un autre logiciel, nous avons besoin comme d’habitude de deux fichiers qui pourront être partagés entre les étudiants et les formateurs si l’on obtient le statut de classroom pour l’école d’été.\n\nle fichier ipums00019.DAT qui contient les données au format compressé .gz\nle fichier ipums00019.DDI qui contient les métadonnées au format .xml\n\nPour importer les données dans R, il faut installer le package ipumsr qui va nous permettre de lire les métadonnées puis d’importer les données en une seule opération.\n\n# Importation de l'échantillon à 10%\nddi <- read_ipums_ddi(\"ipums/rp/ipumsi_00019.xml\")\ndata <- read_ipums_micro(ddi)\nsaveRDS(data,\"ipums/rp/rp_benin_4dates_samp10pct.RDS\")"
  },
  {
    "objectID": "d03_01_mobil_data.html#conversion-de-format-dans-r",
    "href": "d03_01_mobil_data.html#conversion-de-format-dans-r",
    "title": "7  Préparation des données",
    "section": "7.5 Conversion de format dans R",
    "text": "7.5 Conversion de format dans R\nNous reviendrons ultérieurement sur le format du tableau R obtenu qui n’est pas un data.frame standard car il comporte des labels supplémentaire donnant à la fois le nom des variables et le code de leurs modalités. On retiendra juste ici que les données initialement de type haven_labelled peuvent être converties en type factor à l’aide du package haven ce qui permet de visualiser plus facilement.\nA titre d’exemple, le petit programme ci-dessous convertit l’ensemble des données en factor et affiche les premières lignes.\n\n# Lit le fichier enregistré\nrp<-readRDS(\"ipums/rp/rp_benin_4dates_samp10pct.RDS\")\n\n# Convertit les variables haven_labelled en factors\nrp<-as_factor(rp, only_labelled=T)\nclass(rp)\n\n> [1] \"tbl_df\"     \"tbl\"        \"data.frame\"\n\n# Convertit le tableau en pur data.frame\nrp<-as.data.frame(rp)\nclass(rp)\n\n> [1] \"data.frame\"\n\n# Affiche les 10 premières lignes (soit 2 ménages de 5 personnes )\nkable(head(rp,10), caption = \"Extrait des données IPUMS International sur le Bénin\")\n\n\nExtrait des données IPUMS International sur le Bénin\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCOUNTRY\nYEAR\nSAMPLE\nSERIAL\nHHWT\nURBAN\nGEOLEV1\nGEOLEV2\nELECTRIC\nWATSUP\nPERNUM\nPERWT\nRESIDENT\nRELATE\nRELATED\nAGE\nAGE2\nSEX\nMARST\nMARSTD\nBIRTHYR\nCITIZEN\nBPLBJ1\nBPLBJ2\nEDATTAIN\nEDATTAIND\nYRSCHOOL\nEDUCBJ\nEMPSTAT\nEMPSTATD\nLABFORCE\nMIGRATEP\nMIGCTRYP\nGEOMIG1_P\nMIGYRS1\nMIG1_P_BJ\nMIG2_P_BJ\n\n\n\n\nBenin\n1979\nBenin 1979\n1000\n10\nNA\n204001\n204001001\nNo\nNo piped water\n1\n10\nNA\nHead\nHead\n38\n35 to 39\nMale\nMarried/in union\nMarried, polygamous\nNA\nCitizen, not specified\nAlibori\nBanikorara\nLess than primary completed\nNo schooling\nNone or pre-school\nNone\nEmployed\nEmployed, not specified\nYes, in the labor force\nSame major, same minor administrative unit\nNA\nAlibori [Department: Benin]\n15\nAlibori\nBanikorara\n\n\nBenin\n1979\nBenin 1979\n1000\n10\nNA\n204001\n204001001\nNo\nNo piped water\n2\n10\nNA\nSpouse/partner\nSpouse/partner\n30\n30 to 34\nFemale\nMarried/in union\nMarried, monogamous\nNA\nCitizen, not specified\nAlibori\nBanikorara\nLess than primary completed\nNo schooling\nNone or pre-school\nNone\nInactive\nHousework\nNo, not in the labor force\nSame major, same minor administrative unit\nNA\nAlibori [Department: Benin]\n15\nAlibori\nBanikorara\n\n\nBenin\n1979\nBenin 1979\n1000\n10\nNA\n204001\n204001001\nNo\nNo piped water\n3\n10\nNA\nChild\nChild\n3\n0 to 4\nFemale\nSingle/never married\nSingle/never married\nNA\nCitizen, not specified\nAlibori\nBanikorara\nNIU (not in universe)\nNIU (not in universe)\nNIU (not in universe)\nNIU (not in universe)\nNIU (not in universe)\nNIU (not in universe)\nNIU (not in universe)\nSame major, same minor administrative unit\nNA\nAlibori [Department: Benin]\n3\nAlibori\nBanikorara\n\n\nBenin\n1979\nBenin 1979\n1000\n10\nNA\n204001\n204001001\nNo\nNo piped water\n4\n10\nNA\nChild\nChild\n9\n5 to 9\nFemale\nSingle/never married\nSingle/never married\nNA\nCitizen, not specified\nAlibori\nBanikorara\nLess than primary completed\nNo schooling\nNone or pre-school\nNone\nNIU (not in universe)\nNIU (not in universe)\nNIU (not in universe)\nSame major, same minor administrative unit\nNA\nAlibori [Department: Benin]\n5\nAlibori\nBanikorara\n\n\nBenin\n1979\nBenin 1979\n1000\n10\nNA\n204001\n204001001\nNo\nNo piped water\n5\n10\nNA\nSpouse/partner\nSpouse/partner\n33\n30 to 34\nFemale\nMarried/in union\nMarried, monogamous\nNA\nCitizen, not specified\nAlibori\nBanikorara\nLess than primary completed\nNo schooling\nNone or pre-school\nNone\nInactive\nHousework\nNo, not in the labor force\nSame major, same minor administrative unit\nNA\nAlibori [Department: Benin]\n15\nAlibori\nBanikorara\n\n\nBenin\n1979\nBenin 1979\n1000\n10\nNA\n204001\n204001001\nNo\nNo piped water\n6\n10\nNA\nChild\nChild\n3\n0 to 4\nMale\nSingle/never married\nSingle/never married\nNA\nCitizen, not specified\nAlibori\nBanikorara\nNIU (not in universe)\nNIU (not in universe)\nNIU (not in universe)\nNIU (not in universe)\nNIU (not in universe)\nNIU (not in universe)\nNIU (not in universe)\nSame major, same minor administrative unit\nNA\nAlibori [Department: Benin]\n3\nAlibori\nBanikorara\n\n\nBenin\n1979\nBenin 1979\n1000\n10\nNA\n204001\n204001001\nNo\nNo piped water\n7\n10\nNA\nChild\nChild\n6\n5 to 9\nMale\nSingle/never married\nSingle/never married\nNA\nCitizen, not specified\nAlibori\nBanikorara\nLess than primary completed\nNo schooling\nNone or pre-school\nNone\nNIU (not in universe)\nNIU (not in universe)\nNIU (not in universe)\nSame major, same minor administrative unit\nNA\nAlibori [Department: Benin]\n5\nAlibori\nBanikorara\n\n\nBenin\n1979\nBenin 1979\n1000\n10\nNA\n204001\n204001001\nNo\nNo piped water\n8\n10\nNA\nChild\nChild\n9\n5 to 9\nMale\nSingle/never married\nSingle/never married\nNA\nCitizen, not specified\nAlibori\nBanikorara\nLess than primary completed\nNo schooling\nNone or pre-school\nNone\nNIU (not in universe)\nNIU (not in universe)\nNIU (not in universe)\nSame major, same minor administrative unit\nNA\nAlibori [Department: Benin]\n5\nAlibori\nBanikorara\n\n\nBenin\n1979\nBenin 1979\n1000\n10\nNA\n204001\n204001001\nNo\nNo piped water\n9\n10\nNA\nChild\nChild\n12\n10 to 14\nMale\nSingle/never married\nSingle/never married\nNA\nCitizen, not specified\nAlibori\nBanikorara\nLess than primary completed\nNo schooling\nNone or pre-school\nNone\nEmployed\nEmployed, not specified\nNIU (not in universe)\nSame major, same minor administrative unit\nNA\nAlibori [Department: Benin]\n10\nAlibori\nBanikorara\n\n\nBenin\n1979\nBenin 1979\n1000\n10\nNA\n204001\n204001001\nNo\nNo piped water\n10\n10\nNA\nChild\nChild\n15\n15 to 19\nFemale\nSingle/never married\nSingle/never married\nNA\nCitizen, not specified\nAlibori\nBanikorara\nLess than primary completed\nNo schooling\nNone or pre-school\nNone\nEmployed\nEmployed, not specified\nYes, in the labor force\nSame major, same minor administrative unit\nNA\nAlibori [Department: Benin]\n15\nAlibori\nBanikorara"
  },
  {
    "objectID": "d03_02_mobil_durvie.html#définition-générale",
    "href": "d03_02_mobil_durvie.html#définition-générale",
    "title": "8  Migrations durée de vie",
    "section": "8.1 Définition générale",
    "text": "8.1 Définition générale\nNous proposons dans ce chapitre une analyse des migrations durée de vie c’est-à-dire des différences entre le lieu de naissance et le lieu de résidence déclarés au moment du recensement. Il s’agit évidemment d’une mesure assez grossière puisqu’elle conduit à ignorer toutes les étapes suivies par le migrant au cours de sa vie et dépend étroitement de l’âge de l’individu. La mesure peut de plus s’avérer trompeuse puisqu’une personne née en un lieu A peut avoir vécu dans les lieux B, C, D avant de revenir en A au moment du recensement qui concluera à l’absence de mobilité…\n\n\n\nExemple théorique de parcours migratoire\n\n\nDans l’exemple théorique présenté ci-dessus, l’individu concerné qui est né dans la commune de Malanville (département Alibori) sera réputé avoir effectué une migration durée de vie lors des recensements de 1979 où il est recensé à Parakou (département de Borgou), en 1992 où il est recensé à Abomey-Calavi (département Atlantique) et en 2002 où iest recensé à Grand-Popo (département du Mono). En revanche il ne sera pas considéré comme migrant en 2013 puisqu’il réside à nouveau dans la commune et le département de son lieu de naissance."
  },
  {
    "objectID": "d03_02_mobil_durvie.html#variables-ipums",
    "href": "d03_02_mobil_durvie.html#variables-ipums",
    "title": "8  Migrations durée de vie",
    "section": "8.2 Variables IPUMS",
    "text": "8.2 Variables IPUMS\nLe site IPUMS permet d’analyser en détail la disponibilité des variables utiles à l’analyse ainsi que leurs éventuels changements au cours du temps. Il est donc recommandé d’utiliser les métadonnées nombreuses offertes par IPUMS avant de se lancer dans ses propres analyses\n\n8.2.1 Département de naissance (BPLBJ1)\nLa page de description de la variable BPLBJ1 nous fournit d’abord une description de sa disponibilité et des effectifs correspondant à chacune des dates de recensement.\n\n\n\nDisponibilité de la variable département de naissance\n\n\nComme on peut le voir dans l’image ci-dessous, il n’y a pas de difficultés particulières concernant les mouvements internes au pays mais il y a une absence d’information sur les personnes nées à l’étranger lors des recensements de 1979 et 1992. Ils sont rangés à cette date dans la catégorie inconnue dont on voit en 2002 qu’elle ne concerne pas forcément les étrangers.\nLes onglets suivants précisent la définition de la variable en anglais (BPLBJ1 indicates the person’s department of birth within Benin.) et indiquent le degré de comparabilité entre les dates (There have not been any changes in boundaries for all sample years in BPLBJ1 and is comparable across all available sample years.). Ils fournissent ensuite un document précisant les questions exactes qui ont été posées dans le questionnaire de recnsement et les instructions données aux agents recenseurs.\n Mieux encore, on peut accéder à un fac similé du document papier de recensemet qui a permis d’établir les statistiques de lieu de résidence (en vert), de lieu de naissance (en rouge) et de lieu de résidence antérieure (en bleu)\n \n\n\n8.2.2 Commune de naissance (BPLBJ2)\nCette variable permet une localisation plus précise des lieux de naissance mais elle comporte un certain degré d’incertitude puisque pour certains individus on ne connaît que le département de naissance mais pas la commune à l’intérieur de ceux-ci. Ces cas de localisation du leiu de naissance uniquement au niveau du département ne se présentent qu’en 2002 et 2013 et concernent un effectif limité. Dans le cas des recensements de 1979 et 1992, ils sont comptabilisés dans la catégorie “Inconnu” dont nous avons vu précédemment qu’elle concernait aussi les personnes nées à l’étranger.\n\n\n\nQuestionnaire de la variable département de naissance au RP 1979\n\n\nAu final, et dans la perspective comparative que nous suivons, il semble préférable de travailler sur un échantillon limité aux individus dont on connait la commune de naissance en éliminant ceux qui sont nés à l’étranger."
  },
  {
    "objectID": "d03_02_mobil_durvie.html#création-dindicateurs",
    "href": "d03_02_mobil_durvie.html#création-dindicateurs",
    "title": "8  Migrations durée de vie",
    "section": "8.3 Création d’indicateurs",
    "text": "8.3 Création d’indicateurs\nNous allons maintenant compléter la base de donnée en y ajoutant deux indicateurs relatifs aux migrations durée de vie entre départments et communes. Nous allons dans le même temps éliminer du fichier les observations manquantes ou non disponibles aux deux niveaux.\n\n8.3.1 Nouvelles variables\nLe programme qui suit est un peu compliqué car les variables relatives aux lieux de naissance ne sont pas codés de la même façon que les variables de résidence. Il faut donc reconstituer les codes avant de pouvoir tester leur égalité …\n\n### Load data\nrp<-readRDS(\"ipums/rp/rp_benin_4dates_samp10pct.RDS\")\n\n### Recode and filter\n\n\n### Level I : Create new variables and filter\ncode1<-readRDS(\"ipums/geom/geo1_bj2013.RDS\") %>% st_drop_geometry()\nrecode1<-code1$DEPT2013\nnames(recode1)<-paste0(code1$CNTRY_CODE,code1$IPUM2013)\ntest<-as_factor(as.numeric(rp$BPLBJ1))\ntest<-fct_recode(test,!!!recode1)\nrp$LEV1_NAI<-as.character(test)\ntable(rp$LEV1_NAI)\n\ncode2<-readRDS(\"ipums/geom/geo2_bj2013.RDS\") %>% st_drop_geometry()\nrecode2<-code2$COMN2013\nnames(recode2)<-paste0(code2$CNTRY_CODE,code2$IPUM2013)\ntest<-as_factor(as.numeric(rp$BPLBJ2))\ntest<-fct_recode(test,!!!recode2)\nrp$LEV2_NAI<-as.character(test)\n\n\nrp<-rp %>% mutate(LEV1_RES = as.character(as_factor(GEOLEV1))) %>%\n             filter(nchar(LEV1_NAI) ==6) %>%\n             mutate(MIG_DV_1 = as.numeric(LEV1_RES!=LEV1_NAI))\n\n### Level II Create new variables and filter \nrp<-rp %>% mutate(LEV2_RES = as.character(as_factor(GEOLEV2))) %>%\n             filter(nchar(LEV2_NAI) ==9) %>%\n             mutate(MIG_DV_2 = as.numeric(LEV2_RES!=LEV2_NAI))\n\nsaveRDS(rp,\"ipums/rp/mobil_benin_4dates_samp10pct.RDS\" )\n\n\n\n8.3.2 Indicateurs globaux\nPour vérifier la fiabilité de nos résultats, on calcule pour chaque date le nombre de personnes qui résident dans un autre département ou une autre commune qu’au moment de leur naissance.\n\nrp <- readRDS(\"ipums/rp/mobil_benin_4dates_samp10pct.RDS\" )\n\n### Check results\ntab <- rp %>% group_by(YEAR, MIG_DV_1) %>%\n              summarise(N = sum(PERWT)) %>%\n              reshape2::dcast(formula = YEAR~MIG_DV_1, value.var=\"N\") %>%\n              select(Recensement = YEAR,\n                     Immobile = 2,\n                     Mobile = 3) %>%\n              mutate(Total = Immobile+Mobile,\n                     TxMobil = round(100*Mobile/Total,2))\nkable(tab, caption = \"Mobilité durée de vie au Bénin / Départements\"  ) \n\n\nMobilité durée de vie au Bénin / Départements\n\n\nRecensement\nImmobile\nMobile\nTotal\nTxMobil\n\n\n\n\n1979\n2854050\n362340\n3216390\n11.27\n\n\n1992\n4227630\n604460\n4832090\n12.51\n\n\n2002\n5681660\n842960\n6524620\n12.92\n\n\n2013\n8492480\n1239330\n9731810\n12.73\n\n\n\n\n### Check results\ntab <- rp %>% group_by(YEAR, MIG_DV_2) %>%\n              summarise(N = sum(PERWT)) %>%\n              reshape2::dcast(formula = YEAR~MIG_DV_2, value.var=\"N\") %>%\n              select(Recensement = YEAR,\n                     Immobile = 2,\n                     Mobile = 3) %>%\n              mutate(Total = Immobile+Mobile,\n                     TxMobil = round(100*Mobile/Total,2))\nkable(tab, caption = \"Mobilité durée de vie au Bénin / Communes\"  )  \n\n\nMobilité durée de vie au Bénin / Communes\n\n\nRecensement\nImmobile\nMobile\nTotal\nTxMobil\n\n\n\n\n1979\n2695300\n521090\n3216390\n16.20\n\n\n1992\n4006900\n825190\n4832090\n17.08\n\n\n2002\n5344080\n1180540\n6524620\n18.09\n\n\n2013\n7979390\n1752420\n9731810\n18.01\n\n\n\n\n\n\nCommentaire : A chaque date on trouve environ 12% de personnes nées dans un autre département.\n\n\n\n8.3.3 Indicateurs départementaux\nOn calcule pour chaque département les trois variables de stock suivantes :\n\nSTA : le nombre de personnes recensées dans un département qui y sont né\nEMI : le nombre de personnes nées dans un département qui ont té recensées dans un autre\nIMM : le nombre de personnes recensées dans un département qui sont nées dans un autre.\n\nOn en déduit trois autres variables de stock :\n\nVOL = EMI+IMM : le volume de personnes qui sont nées ou résident dans un département.\nSOL = IMM-EMI : le solde des arrivées et des départs d’un département parmi les survivants à la date du recensement\nPOMOY = STA + (EMI+IMM)/2 : Une estimation (très imparfaite) de la population moyenne du département entre la date du recensement et la date de naissance de personnes.\n\nCe qui permet finalement d’établir les indicateurs de taux suivants :\n\ntxEMI = 100 x EMI/POPMOY : taux d’émigration (en %)\ntxIMM = 100 x IMM/POPMOY : taux d’immigration (en %)\ntxMOB = 100 x VOL/POPMOY : taux de mobilité (en %)\ntxACM = 100 x SOL/POPMOY : taux d’ac. migratoire (en %)\ntxASY = SOL/VOL : indicateur d’asymétrie des flux (compris entre -1 et +1)\n\n\n# Load code and name of units\nmap1<-st_read(\"mobil/geom/map_lev1_bj2013.shp\",quiet=T)\ntab1<-map1 %>% st_drop_geometry() %>% select(code,nom)\n\n# Non migrant\nSTA <-  rp %>% filter(MIG_DV_1 ==0) %>%\n              group_by(YEAR,LEV1_NAI) %>% \n              summarize(N=sum(PERWT)) %>%\n              select(date = YEAR,\n                     code = LEV1_NAI,\n                     STA = N)\n\n\n# Departures\nEMI <- rp %>% filter(MIG_DV_1 ==1) %>%\n              group_by(YEAR,LEV1_NAI) %>% \n              summarize(N=sum(PERWT)) %>%\n              select(date = YEAR,\n                     code = LEV1_NAI,\n                     EMI = N)\n# Arrivals\nIMM <- rp %>% filter(MIG_DV_1 ==1) %>%\n              group_by(YEAR,LEV1_RES) %>% \n              summarize(N=sum(PERWT)) %>%\n              select(date = YEAR,\n                     code = LEV1_RES,\n                     IMM = N)\n\n# Put together\ntab1 <- tab1 %>% right_join(STA) %>% \n               left_join(EMI) %>%\n               left_join(IMM) %>%\n                mutate(VOL=EMI+IMM,\n                       SOL=IMM-EMI,\n                       POPMOY= STA+(EMI+IMM)/2,\n                       txEMI = 100*EMI/POPMOY,\n                       txIMM = 100*IMM/POPMOY,\n                       txMOB = 100*VOL/POPMOY,\n                       txACM = 100*SOL/POPMOY,\n                       txASY = SOL/VOL)\n# Sauvegarde\nsaveRDS(tab1, \"mobil/all/mob_dv_lev1.RDS\")\n\nkable(head(tab1),\n      digits = c(0,0,0,0,0,0,0,0,0,1,1,1,1,2),\n      caption = \"Indicateurs départementaux de migration durée de vie au Bénin (1979, 1992, 2002, 2013)\")\n\n\nIndicateurs départementaux de migration durée de vie au Bénin (1979, 1992, 2002, 2013)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ncode\nnom\ndate\nSTA\nEMI\nIMM\nVOL\nSOL\nPOPMOY\ntxEMI\ntxIMM\ntxMOB\ntxACM\ntxASY\n\n\n\n\n204001\nAlibori\n1979\n192050\n10650\n7580\n18230\n-3070\n201165\n5.3\n3.8\n9.1\n-1.5\n-0.17\n\n\n204001\nAlibori\n1992\n330010\n19570\n12550\n32120\n-7020\n346070\n5.7\n3.6\n9.3\n-2.0\n-0.22\n\n\n204001\nAlibori\n2002\n478180\n19200\n14200\n33400\n-5000\n494880\n3.9\n2.9\n6.7\n-1.0\n-0.15\n\n\n204001\nAlibori\n2013\n819840\n32520\n19610\n52130\n-12910\n845905\n3.8\n2.3\n6.2\n-1.5\n-0.25\n\n\n204002\nAtacora\n1979\n277370\n18470\n8370\n26840\n-10100\n290790\n6.4\n2.9\n9.2\n-3.5\n-0.38\n\n\n204002\nAtacora\n1992\n387050\n43130\n14260\n57390\n-28870\n415745\n10.4\n3.4\n13.8\n-6.9\n-0.50\n\n\n\n\n\nil est ensuite facile d’établir une cartographie des indicateurs de son choix pour comparer l’évolution à chacune des quatre dates de recensement :\n\n\n\n\n\nSolde des migrations durée de vie par département au Bénin\n\n\n\n\n\nCommentaire : A première vue la série de carte proposée semble cohérente avec les conaissances empiriques. On voit notamment bien comment la capitale Cotonou (département du Littoral) commence par attirer les populations des départements voisins en 1979 avant d’arriver à saturation et de resdistribuer la population vers les départements voisins d’Atlantique et de Ouémé pour aboutir à une inversion du solde en 2013. On note par ailleurs le solde positif permanent du département de Borgou et à un moindre degré du departement des Collines.\n\n\n\n\n\n\nAsymétrie des migrations durée de vie par département au Bénin\n\n\n\n\n\nCommentaire : L’indice d’asymétrie (rapport entre le solde et le volume des echanges) est un bon indicateur d’attractivité migratoire. Il est normalisé entre -1 (uniquement des départs) et +1 (uniquement des arrivées) avec une valeur de référence 0 (égalité entre les départs et les arrivées). Appliqué aux migrations durée de vie, il montre bien l’attractivité permanente de certains départements comme le Borgou et la répulsivité permanente d’autres comme Atacora. Mais il souligne également des évolution de ces niveaux voire des retrournements de situation notamment dans le sud entre Cotonou et sa périphérie.\n\n\n\n8.3.4 Indicateurs communaux\nOn peut répliquer la même procédure sur les données communales afin d’obtenir des informations de résolution spatiale plus fine. On doit toutefois faire attention à l’incertitude statistique plus grande des calculs puisque les analyses ne concernent qu’un échantillon de 10%. Il peut donc y avoir une marge d’erreur élevé, d’autant plus importante pour les recensements anciens que la population (et donc l’échantillon) était moins importante.\n\n\n\nA ce niveau d’analyse, il devent difficile de visualiser les résultats sur une carte géographique normale et il peut être intéressant de proposer conjointement une représentation sous forme de cartogramme dont la surface est proportionnelle à la population de la commune à la date du recensement. On peut illustrer cette solution à l’aide du RP 2013 pour lequel nous disposons d’un tel cartogramme (il serait évidemment incorrect de l’utiliser pour les autres dates, la population ayant changé).\n\n\n\n\n\nSolde des migrations durée de vie par département au Bénin\n\n\n\n\n\nCommentaire : Le passage au niveau communal permet de mettre à jour des inégalités considérables entre les communes d’un même département. La représentation sous forme de cartogramme permet de mieux visualiser les dynamiques à l’oeuvre dans la région métropolitaine côtière et l’intense redistribution qui s’opère de Cotonou vers Abomey-Calavi ou Porto-Novo"
  },
  {
    "objectID": "d03_02_mobil_durvie.html#matrices-origine-destination",
    "href": "d03_02_mobil_durvie.html#matrices-origine-destination",
    "title": "8  Migrations durée de vie",
    "section": "8.4 Matrices Origine-Destination",
    "text": "8.4 Matrices Origine-Destination\nAu delà des indicateurs simples décrits dans la section précédente, on peut procéder à une analyse spatiale des déplacements en construisant des matrices origine-destination qui mesurent le flux de personnes entre leurs lieux de naissance et leurs lieux de résidence. Cela ouvre une vaste gamme de possibilités de traitements que nous allons illustrer par l’exemple du recensement de 2013 mais que l’on pourrait évidemment reproduire aux autres dates.\n\n8.4.1 Flux entre départements\nL’établissement de la matrice de flux est très facile. Elle suppose d’établir d’abord un tableau d’interactions au format “long”\n\n# Load individual data\nrp <- readRDS(\"ipums/rp/mobil_benin_4dates_samp10pct.RDS\" )\n\n# Load map and extract name of units\nmap<-st_read(\"mobil/geom/cartog_lev1_bj2013.shp\", quiet=T)\ncodei <- map %>% st_drop_geometry() %>% select(i=code,name_i=nom)\ncodej <- map %>% st_drop_geometry() %>% select(j=code,name_j=nom)\n\n# Compute interactions\nint <- rp %>% filter(YEAR == 2013) %>% \n                   group_by(i = LEV1_NAI,\n                            j = LEV1_RES) %>%\n                   summarize(Fij = sum(PERWT)) %>%\n                   left_join(codei) %>%\n                   left_join(codej) %>%\n                   select(i,j,name_i,name_j, Fij)\n# Visualize\nkable(head(int), caption = \"Migrations durée de vie au Bénin en 2013 (format long)\")\n\n\nMigrations durée de vie au Bénin en 2013 (format long)\n\n\ni\nj\nname_i\nname_j\nFij\n\n\n\n\n204001\n204001\nAlibori\nAlibori\n819840\n\n\n204001\n204002\nAlibori\nAtacora\n4650\n\n\n204001\n204003\nAlibori\nAtlantique\n2880\n\n\n204001\n204004\nAlibori\nBorgou\n16910\n\n\n204001\n204005\nAlibori\nCollines\n1940\n\n\n204001\n204006\nAlibori\nCouffo\n100\n\n\n\n\n\nOn peut ensuite transformer le tableau d’interaction en format large en utilisant au choix la fonction dcast() (des packages reshape2 et data.table ) ou la procédure pivot_wider() du package tidyr qui fait partie de l’univers tidyverse.\n\nint2<- reshape2::dcast(int, formula = name_i~name_j, values.var=Fij)\nkable(int2, caption =\"Migrations durée de vie au Bénin en 2013 (format large)\")\n\n\nMigrations durée de vie au Bénin en 2013 (format large)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nname_i\nAlibori\nAtacora\nAtlantique\nBorgou\nCollines\nCouffo\nDonga\nLittoral\nMono\nOueme\nPlateau\nZou\n\n\n\n\nAlibori\n819840\n4650\n2880\n16910\n1940\n100\n1130\n2070\n370\n1010\n180\n1280\n\n\nAtacora\n2110\n742110\n5900\n45210\n7920\n230\n8100\n3290\n640\n1950\n530\n1550\n\n\nAtlantique\n490\n1450\n931460\n3230\n2370\n1920\n690\n48590\n7720\n17730\n2110\n7100\n\n\nBorgou\n5320\n6640\n12050\n1045670\n7640\n900\n5380\n9250\n1080\n4090\n430\n3520\n\n\nCollines\n2700\n2820\n31610\n23890\n611770\n1130\n3900\n11290\n1450\n4580\n1570\n11010\n\n\nCouffo\n320\n630\n31080\n3590\n5190\n718560\n920\n10300\n12210\n4850\n1470\n8910\n\n\nDonga\n1820\n4460\n5800\n21080\n8160\n160\n500830\n10030\n220\n2660\n440\n800\n\n\nLittoral\n4170\n2580\n203580\n11210\n5570\n2910\n2250\n399480\n10620\n66160\n4370\n11780\n\n\nMono\n380\n570\n47510\n1900\n1500\n5250\n310\n21900\n442180\n7280\n1060\n3210\n\n\nOueme\n740\n1270\n27530\n4800\n1880\n1360\n590\n47700\n2460\n917830\n19500\n4680\n\n\nPlateau\n380\n350\n6200\n1110\n1780\n300\n150\n11390\n800\n25680\n577800\n3610\n\n\nZou\n1180\n1410\n62460\n9300\n32970\n4380\n840\n32790\n2480\n12230\n8260\n784950\n\n\n\n\n\nOn peut enfin transformer le tableau en un objet de type matrice ce qui suppose de transformer la variable name_i en nom des lignes :\n\nint3 <- as.matrix(int2[,-1])\nrow.names(int3)<-int2[[1]]\nkable(int3, caption =\"Migrations durée de vie au Bénin en 2013 (matrice)\")\n\n\nMigrations durée de vie au Bénin en 2013 (matrice)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAlibori\nAtacora\nAtlantique\nBorgou\nCollines\nCouffo\nDonga\nLittoral\nMono\nOueme\nPlateau\nZou\n\n\n\n\nAlibori\n819840\n4650\n2880\n16910\n1940\n100\n1130\n2070\n370\n1010\n180\n1280\n\n\nAtacora\n2110\n742110\n5900\n45210\n7920\n230\n8100\n3290\n640\n1950\n530\n1550\n\n\nAtlantique\n490\n1450\n931460\n3230\n2370\n1920\n690\n48590\n7720\n17730\n2110\n7100\n\n\nBorgou\n5320\n6640\n12050\n1045670\n7640\n900\n5380\n9250\n1080\n4090\n430\n3520\n\n\nCollines\n2700\n2820\n31610\n23890\n611770\n1130\n3900\n11290\n1450\n4580\n1570\n11010\n\n\nCouffo\n320\n630\n31080\n3590\n5190\n718560\n920\n10300\n12210\n4850\n1470\n8910\n\n\nDonga\n1820\n4460\n5800\n21080\n8160\n160\n500830\n10030\n220\n2660\n440\n800\n\n\nLittoral\n4170\n2580\n203580\n11210\n5570\n2910\n2250\n399480\n10620\n66160\n4370\n11780\n\n\nMono\n380\n570\n47510\n1900\n1500\n5250\n310\n21900\n442180\n7280\n1060\n3210\n\n\nOueme\n740\n1270\n27530\n4800\n1880\n1360\n590\n47700\n2460\n917830\n19500\n4680\n\n\nPlateau\n380\n350\n6200\n1110\n1780\n300\n150\n11390\n800\n25680\n577800\n3610\n\n\nZou\n1180\n1410\n62460\n9300\n32970\n4380\n840\n32790\n2480\n12230\n8260\n784950\n\n\n\n\n\nL’intérêt du format matriciel est de faciliter des opérations mathématiques telles que le calcul de pourcentage en ligne ou le pourcentage en colonnes qui vont indiquer respectivement des probabilités de destination ou des probabilités d’origines.On va illustrer ces possibilités sur une matrice dont on a retiré la diagonale\n\nint4<-int3\ndiag(int4)<-NA\nint4 <- 100*int4/apply(int4,1,sum, na.rm=T)\nkable(int4, digits=1, caption = \"Probabilité de destination des migrants durée de vie en 2013 (en %)\")\n\n\nProbabilité de destination des migrants durée de vie en 2013 (en %)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAlibori\nAtacora\nAtlantique\nBorgou\nCollines\nCouffo\nDonga\nLittoral\nMono\nOueme\nPlateau\nZou\n\n\n\n\nAlibori\nNA\n14.3\n8.9\n52.0\n6.0\n0.3\n3.5\n6.4\n1.1\n3.1\n0.6\n3.9\n\n\nAtacora\n2.7\nNA\n7.6\n58.4\n10.2\n0.3\n10.5\n4.2\n0.8\n2.5\n0.7\n2.0\n\n\nAtlantique\n0.5\n1.6\nNA\n3.5\n2.5\n2.1\n0.7\n52.0\n8.3\n19.0\n2.3\n7.6\n\n\nBorgou\n9.4\n11.8\n21.4\nNA\n13.6\n1.6\n9.6\n16.4\n1.9\n7.3\n0.8\n6.3\n\n\nCollines\n2.8\n2.9\n32.9\n24.9\nNA\n1.2\n4.1\n11.8\n1.5\n4.8\n1.6\n11.5\n\n\nCouffo\n0.4\n0.8\n39.1\n4.5\n6.5\nNA\n1.2\n13.0\n15.4\n6.1\n1.8\n11.2\n\n\nDonga\n3.3\n8.0\n10.4\n37.9\n14.7\n0.3\nNA\n18.0\n0.4\n4.8\n0.8\n1.4\n\n\nLittoral\n1.3\n0.8\n62.6\n3.4\n1.7\n0.9\n0.7\nNA\n3.3\n20.3\n1.3\n3.6\n\n\nMono\n0.4\n0.6\n52.3\n2.1\n1.7\n5.8\n0.3\n24.1\nNA\n8.0\n1.2\n3.5\n\n\nOueme\n0.7\n1.1\n24.5\n4.3\n1.7\n1.2\n0.5\n42.4\n2.2\nNA\n17.3\n4.2\n\n\nPlateau\n0.7\n0.7\n12.0\n2.1\n3.4\n0.6\n0.3\n22.0\n1.5\n49.6\nNA\n7.0\n\n\nZou\n0.7\n0.8\n37.1\n5.5\n19.6\n2.6\n0.5\n19.5\n1.5\n7.3\n4.9\nNA\n\n\n\n\n\n\nCommentaire : Si l’on prend l’exemple des personnes nées à Alibori qui résident dans un autre département en 2013, on constate que plus de la moitié d’entre elles (52%) on été recensés dans le département de Borgou, 14.3% dans le département voisin d’Atacora et seulement 8.9 % vers Cotonou (département de l’Atlantique). Inversement, les personnes nées dans le département du Mono qui résident dans un autre département en 2013 ont choisi majoritairement la capitale Cotonou (52.3%) et sa périphérie proche du département du Littoral (24.1%). On voit donc bien apparaître des clivages liés à la distance aux métropoles principales du pays qui polarisent chacune un espace migratoire distinct.\n\nProcédons à l’opération inverse de calcul des origines mais en ne retirant pas cette fois-ci la diagonale afin de voir la part des populations autchtones\n\nint5<-t(int3)\nint5 <- 100*int5/apply(int5,1,sum, na.rm=T)\nint5<-t(int5)\nkable(int5, digits=1, caption = \"Département de naissance des individus en 2013 (en %)\")\n\n\nDépartement de naissance des individus en 2013 (en %)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAlibori\nAtacora\nAtlantique\nBorgou\nCollines\nCouffo\nDonga\nLittoral\nMono\nOueme\nPlateau\nZou\n\n\n\n\nAlibori\n97.7\n0.6\n0.2\n1.4\n0.3\n0.0\n0.2\n0.3\n0.1\n0.1\n0.0\n0.2\n\n\nAtacora\n0.3\n96.5\n0.4\n3.8\n1.2\n0.0\n1.5\n0.5\n0.1\n0.2\n0.1\n0.2\n\n\nAtlantique\n0.1\n0.2\n68.1\n0.3\n0.3\n0.3\n0.1\n8.0\n1.6\n1.7\n0.3\n0.8\n\n\nBorgou\n0.6\n0.9\n0.9\n88.0\n1.1\n0.1\n1.0\n1.5\n0.2\n0.4\n0.1\n0.4\n\n\nCollines\n0.3\n0.4\n2.3\n2.0\n88.8\n0.2\n0.7\n1.9\n0.3\n0.4\n0.3\n1.3\n\n\nCouffo\n0.0\n0.1\n2.3\n0.3\n0.8\n97.5\n0.2\n1.7\n2.5\n0.5\n0.2\n1.1\n\n\nDonga\n0.2\n0.6\n0.4\n1.8\n1.2\n0.0\n95.4\n1.6\n0.0\n0.2\n0.1\n0.1\n\n\nLittoral\n0.5\n0.3\n14.9\n0.9\n0.8\n0.4\n0.4\n65.7\n2.2\n6.2\n0.7\n1.4\n\n\nMono\n0.0\n0.1\n3.5\n0.2\n0.2\n0.7\n0.1\n3.6\n91.7\n0.7\n0.2\n0.4\n\n\nOueme\n0.1\n0.2\n2.0\n0.4\n0.3\n0.2\n0.1\n7.8\n0.5\n86.1\n3.2\n0.6\n\n\nPlateau\n0.0\n0.0\n0.5\n0.1\n0.3\n0.0\n0.0\n1.9\n0.2\n2.4\n93.5\n0.4\n\n\nZou\n0.1\n0.2\n4.6\n0.8\n4.8\n0.6\n0.2\n5.4\n0.5\n1.1\n1.3\n93.2\n\n\n\n\n\n\nCommentaire : La diagonale de cette matrice montre le degré de diversité des origines départementales des population qui résident dans chaque département en 2013. Les départements isolés et peu attractifs ont des taux très élevés de populations nées dans le même département, ce que l’on peut voir avec les départements d’Alibori (97.7%), de Couffo (97.5%)ou d’Atacora (96.5%). Inversement les départements métropolitains qui ont attiré des migrants de tous le pays affichent des taux plus faibles de populations nées dans le même département ce que l’on peut voir pour les départements de l’Atlantique (68.1%), du Littoral (65.7%), des Collines (88.8%) ou de Borgou (88.0%).\n\n\n\n8.4.2 Flux entre communes\nLes flux entre départements sont intéressants d’un point de vue pédagogique puisqu’ils permettent de montrer facilement les tableaux de format 10 x 10 aux étudiants et de leur expliquer les différentes transformations que l’on peut faire subir à une matrice de flux. Mais ils constituent une grille d’analyse assez grossière qui masque notamment tous les flux de proximité. Il est donc plus intéressant, dans un deuxième temps d’attaquer des données plus précises en commençant par étudier les flux vers une seule destinations mais à plusieurs dates.\nA titre d’exemple, nous allons essayer ici de reconstituer l’évolution de l’aire d’attraction de la commune de Parakou au cours du temps.\n\n# Load individual data\nrp <- readRDS(\"ipums/rp/mobil_benin_4dates_samp10pct.RDS\" )\n\n# Load map and extract name of units\nmap<-st_read(\"mobil/geom/cartog_lev2_bj2013.shp\", quiet=T)\ncodename <- map %>% st_drop_geometry() %>% select(code,nom)\n\n# Compute total departure\ndep_tot <- rp %>% filter(MIG_DV_2==1) %>% \n                   group_by(i = LEV2_NAI,\n                            t = YEAR) %>%\n                   summarize(Fij = sum(PERWT)) %>%\n                   reshape2::dcast(formula = i~t,value.var=\"Fij\",fill = 0)\nnames(dep_tot)<-c(\"code\",\"tot79\",\"tot92\",\"tot02\",\"tot13\")\n\n\n# Compute departure to Parakou\ndep_par <- rp %>% filter(MIG_DV_2==1,\n                     LEV2_RES ==\"204004005\") %>% \n                   group_by(i = LEV2_NAI,\n                            t = YEAR) %>%\n                   summarize(Fij = sum(PERWT)) %>%\n                   reshape2::dcast(formula = i~t,value.var=\"Fij\",fill = 0)\nnames(dep_par)<-c(\"code\",\"par79\",\"par92\",\"par02\",\"par13\")\n\n# Merge tables\ntab<-left_join(codename,dep_tot) %>% left_join(dep_par)\n  \n# Add probabilities\ntab <- tab %>% mutate(pct79 = 100*par79/tot79,\n                      pct92 = 100*par92/tot92,\n                      pct02 = 100*par02/tot02,\n                      pct13 = 100*par13/tot13)\n\n\nkable(head(tab), digits=c(0,0,0,0,0,0,0,0,0,0,1,1,1,1),\n      caption = \"Migrations durée de vie vers Parakou en 1979, 1992, 2002 et 2013\")\n\n\nMigrations durée de vie vers Parakou en 1979, 1992, 2002 et 2013\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ncode\nnom\ntot79\ntot92\ntot02\ntot13\npar79\npar92\npar02\npar13\npct79\npct92\npct02\npct13\n\n\n\n\n204001001\nBanikorara\n3460\n5820\n5150\n10340\n420\n610\n1020\n1800\n12.1\n10.5\n19.8\n17.4\n\n\n204001002\nGogounou\n2920\n6570\n3380\n6510\n110\n440\n500\n1070\n3.8\n6.7\n14.8\n16.4\n\n\n204001003\nKandi\n6910\n9140\n9210\n11350\n910\n1530\n1760\n2750\n13.2\n16.7\n19.1\n24.2\n\n\n204001004\nKarimama\n430\n1080\n1920\n3090\n0\n50\n280\n340\n0.0\n4.6\n14.6\n11.0\n\n\n204001005\nMalanville\n1250\n3930\n3360\n7660\n100\n310\n250\n950\n8.0\n7.9\n7.4\n12.4\n\n\n204001006\nSegbana\n760\n1750\n2770\n3310\n100\n130\n310\n710\n13.2\n7.4\n11.2\n21.5\n\n\n\n\nsaveRDS(tab,\"mobil/all/mob_dv_parakou_lev2.RDS\")\n\n\nExemple de lecture : Au recensement de 1979, 3460 personnes natives de la commune de Banikorara résidaient dans une autre commune du Bénin. Parmi ces émigrants, on en trouvait 420 qui résidaient dans la commune de Parakou soit 12.1% des personnes ayant quitté la commune de Banikorara. Au recensement de 2013, on constatait la présence de 10340 personnes natives de la commune de Banikorara qui résidaient dans une autre commune, dont 1800 (17.4%) à Parakou. Il y a donc eu un renforcement de l’attraction de Parakou sur Banikorara, lié soit à de nouvelles migrations, soit à un cumul progressif du nombre d’arrivants qui ne sont pas repartis vers d’autres destinations et ont survécu. Les chiffres doivent toutefois être considérés avec précaution lorsqu’ils concernent de petits effectifs comme dans le cas de la commune de Karimama où le chiffre affiché de 90 migrants vers Parakou en 1992 ne correspond en réalité qu’à 9 cas de l’échantillon de recensement à 10%.\n\nA partir de ce tableau, on peut réaliser tout d’abord une cartographie des communes d’origine des personne qui résident à Parakou mais sont nés dans une autre commune pour chacune des dates de recensement\n\n\n\n\n\nCommune d’origine des personnes recensées à Parakou mais nées ailleurs\n\n\n\n\n\nCommentaire: Les personnes qui résident à Parakou mais sont originaires d’un autre département viennent principalement des cinq départements du nord, de quelques communes du Couffo et de l’agglomération constituée par Cotonou, Abomey-Calavi et Porto-Novo. Cette géographie est apparemment assez stable au cours du temps, ce qui s’expique en partie par le choix de la variable de mobilité durée de vie qui produit des effets cumulatifs. Ces cartes ne permettent cependant pas de bien visualiser les effets de polarisation puisqu’elles subissent un effet de taille : plus une commune est peuplée, plus elle a de chance d’avoir envoyé des migrants vers Parakou.\n\n\n\n\n\n\nProbabilité de résider à Parakou pour les individus ayant quitté leur commune de naissance\n\n\n\n\n\nCommentaire : Cette seconde visualisation montre de façon beaucoup plus nette l’existence d’une coupure entre les cinq départements du nord du pays qui envoient une proportion élevée de leurs migrants vers Parakou et le reste du pays. La tendance générale est au renforcement et à l’homogénéisation spatiale de l’attraction de la ville de Parakou sur la partie nord du pays. Si cette attraction est évidemment liée à la distance (ce que pourra confirmer le modèle gravitaire), elle semble aussi révéler un effet de barrière au vu de la netteté de la coupure qui appraît brutalement au sud du département des Collines. Il s’agit en bref d’un excellent exemple pédagogique pour construire des modules d’analyse de l’interaction spatiale."
  },
  {
    "objectID": "d03_02_mobil_durvie.html#prolongements-possibles",
    "href": "d03_02_mobil_durvie.html#prolongements-possibles",
    "title": "8  Migrations durée de vie",
    "section": "8.5 Prolongements possibles",
    "text": "8.5 Prolongements possibles\nLes exemples présentés ci-dessus concernent les migration durée de vie mais ils pourront être reproduit sur d’autres matrices de migration concernant les mobilités effectuées au cours des années antérieures. Ils pourront également être appliqués facilement à d’autres pays, les migrations durée de vie étant presque toujours disponibles dans le recensement (ce qui n’est pas le cas des autres mesures de mobilité).\nUn point important est la possibilité d’étudier les mobilités de sous-populations plutôt que de populations entières comme nous l’avons fait ici. Il est en effet évident que la probabilité d’avoir effectué une migration durée de vie dépend de l’âge de la personne et augmente globalement avec celui-ci (même si un effet de génération peut entraîner une baisse aux âges plus élevés). On peut donc imaginer d’étudier par exemple la matrice de migrations des femmes de 15 à 30 ans célibataires ou celle des hommes chef de ménage de plus de 50 ans, ou celle des étudiants disposant d’un diplôme de l’enseignement supérieur, etc. La seule limite à ce type d’analyse réside dans la taille des échantillons obtenus et du niveau de découpage territorial retenu. Une sous-population de taille trop réduite ne pourra vraismeblablement pas être analysée valablement au niveau communal et il faudra dans ce cas retenir plutôt le niveau départemental."
  },
  {
    "objectID": "d03_03_mobil_preced.html#définition-générale",
    "href": "d03_03_mobil_preced.html#définition-générale",
    "title": "9  Migrations antérieures",
    "section": "9.1 Définition générale",
    "text": "9.1 Définition générale\nNous proposons dans ce chapitre une analyse des migrations antérieures c’est-à-dire des différences entre le lieu de naissance et le lieu de résidence précédent déclaré au moment du recensement associé à la durée de résidence dans le domicile actuel et au lieu de naissance. Le problème de cette définition c’est qu’elle peut aboutir à des formes différentes de question et de codage des réponses dans les recensements de différents pays ou d’un même pays au cours du temps.\nConsidérons notre exemple théorique du chapitre précédent et la question posée lors du recensement de 1992 au Bénin :\n\n\n\nExemple théorique de parcours migratoire\n\n\n\n\n\nQuestion du RP 1992 du Bénin sur les mobilits antérieures\n\n\n\nNotre individu réside en 1992 à Abomey-Calavi où il est arrivé en 1983. Il va donc répondre à la première question du recensement qu’il réside dans son logement depuis 9 ans et que son lieu de résidence antérieur était la commune de Parakou, située dans le département du Borgou. Comme on sait par ailleurs qu’il est né à Mallanville, on peut reconstituer deux migrations antérieures.\nSi on lui avait posé la question au recensement de 1979, il aurait été recensé à Parakou où il aurait déclaré vivre depuis 6 ans avec pour lieu de résidence antérieure Mallanville qui est aussi son lieu de naissance.On ne connaîtrait donc qu’un seul trajet migratoire ce qui est logique puisqu’à cette date il n’en avait pas effectué d’autres.\nMais si on lui pose la question en 2002, il sera recensé à Grand Popo et déclarera y résider depuis 7 ans avec pour lieu de résidence antérieure Abomey-Calavi. On ignore désormais qu’il a résidé à Parakou et on supposera qu’il est arrivé directement de Mallanville à Abomey-Calavi.\nSi enfin on lui pose la question en 2013 où il est revenu sur son lieu de naissance qui est Malanville, il va déclarer y résider depuis 1 an en indiquant pour lieu de résidence antérieure Abomey-Calavi. On considérera donc à tod qu’il a effectué une migration aller et retour alors qu’en réalité son parcours aura été infiiment plus complexe avec deux passages par Abomey-Calavi et des périodes de résidence à Parakou ou Grand Popo.\n\nComme il est exclu d’apparier les codes d’individu d’un recensement à l’autre pour des raisos d’éthique et d’anonymat, on concluera qu’il est impossible de retrouver les parcours de vie complet d’un individu à partir des données de recensement. Tout au plus peut-on en retrouver quelques traces partielles* mais dont la comparaison n’est pas toujours facile car les questions différent d’une date à une autre ou d’un pays à un autre."
  },
  {
    "objectID": "d03_03_mobil_preced.html#variables-ipums",
    "href": "d03_03_mobil_preced.html#variables-ipums",
    "title": "9  Migrations antérieures",
    "section": "9.2 Variables IPUMS",
    "text": "9.2 Variables IPUMS\nIPUMS 2010 a tenté dans la mesure du possible d’harmoniser les données de résidence antérieure mais il signale à plusieurs reprise la difficulté de l’entreprise et les métadonnées concluent généralement à une certaine fragilité des résultats. A tout le moins, le site fournit des métadonnées très précises et des copies des formulaires de recensement permettant d’y voir plus clair et d’évaluer les degrés de comparabilité.\n\n9.2.1 Durée de résidence dans la localité actuelle (MIGYRS1)\nLa page de description de la variable MIGYRS1 nous fournit d’abord une description de la durée de résidence qui montre des différences de précision selon les années. En 1979, les modalités étaient de nature qualitatives alors que dans les recensements suivants on dispose d’un nombre plus précis d’année mais avec des maxima fixés à 50 ans en 1992, 60 ans en 2002 et 98 ans en 2013.\n\n\n\nDisponibilité de la variable département de naissance\n\n\nComme l’indique le commentaire général d’IPUMS sur cet indicateur au niveau mondial :\n\nLa variable est conceptuellement similaire d’un échantillon à l’autre, mais il existe des problèmes de comparabilité en ce qui concerne les données échelonnées, les unités géographiques et les univers. Certains échantillons ont déclaré l’année de migration sous forme d’intervalles. Les données de ces échantillons sont codées en MIGYRS1 jusqu’à la première année de l’intervalle. La discussion de comparabilité pour le pays indique quand un échantillon a été codé en intervalles. Les intervalles d’origine sont enregistrés dans les variables sources non harmonisées. La plupart des échantillons font état de migrations pour des unités géographiques relativement petites d’un sous-pays, telles que des villages ou des municipalités. Certains font état d’unités un peu plus grandes, comme le deuxième niveau administratif du pays.\n\nOn sera donc très prudent lorsqu’il s’agit de comparer deux pays, mais on peut être plus confiant à l’intérieur d’un même pays, à condition que les unités géographiques définissant la mobilité demeurent les mêmes d’un recensement à l’autre. Dans le cas du Bénin, la variable MIGRATEP permet de vérifier qu’il est toujours possible de reconstituer si un individu à changer de commune ou de département à chaque recensement. Il n’est en revanche pas possible de connaître l’effectif exact des personnes originaires de l’étranger en 1979 et en 1992.\n\n\n\nEffectifs de la variable MIGRATEP\n\n\n\n\n9.2.2 Lieu de résidence antérieure (MIG1_P_BJ, MIG2_P_BJ)\nDans le cas du Bénin, la stabilité du découpage administratif des départements et des communes au cours du temps assure une qualité de comparaison qu’on ne retrouverait pas dans d’autres pays. On dispose e effet pour chaque date de la commune (MIG2_P_BJ) et du département (MIG1_P_BJ) de résidence antérieure, avec le même degré de précision que celui noté pour les lieux de naissance. Il existe une minorité de cas où l’agent recenseur a recensé les départements de résidence antérieurs sans préciser la commune mais il sont peu nombreux et peuvent être facilement éliminés. On peut également repérer les lieux de résidence antérieurs à l’étranger à l’aide la variable\n\n\n\nDistribution des communes de résidence antérieures"
  },
  {
    "objectID": "d03_03_mobil_preced.html#création-dindicateurs",
    "href": "d03_03_mobil_preced.html#création-dindicateurs",
    "title": "9  Migrations antérieures",
    "section": "9.3 Création d’indicateurs",
    "text": "9.3 Création d’indicateurs\nNous allons maintenant compléter la base de donnée établie pour les migrations durée de vie en y ajoutant des indicateurs relatifs aux lieux de résidence antérieurs et à la durée d’installation dans le lieu de résidence actuel.\n\n9.3.1 Nouvelles variables\n\n### Load data\nrp <- readRDS(\"ipums/rp/mobil_benin_4dates_samp10pct.RDS\" )\n\n\n# Align duration of residence on 1979\nRES_TIM<-as_factor(rp$MIGYRS1)\nlevels(RES_TIM)[1]<-\"0\"\nlevels(RES_TIM)[2]<-\"1\"\nlevels(RES_TIM)[96]<-\"95\"\nlevels(RES_TIM)[97]<-NA\nlevels(RES_TIM)[98]<-NA\nlevels(RES_TIM)[99]<-NA\nlevels(RES_TIM)[100]<-NA\nRES_TIM<-as.numeric(RES_TIM)\nRES_TIM<-cut(RES_TIM, c(0,2,5,10,15, 100))\nrp$MIG_ANT_TIME<-RES_TIM\n\n\n### Level I : Create new variables and filter \nrp<-rp %>% mutate(LEV1_RES = as.character(GEOLEV1),\n                   LEV1_ANT = as.character(MIG1_P_BJ)) %>%\n             filter(substr(LEV1_ANT,5,5) !=\"9\") %>%\n             mutate(MIG_PR_1 = as.numeric(LEV1_RES!=LEV1_ANT))\n\n### Level II Create new variables and filter \nrp<-rp %>% mutate(LEV2_RES = as.character(GEOLEV2),\n                   LEV2_ANT = as.character(MIG2_P_BJ)) %>%\n             filter(substr(LEV2_ANT,8,9) !=\"99\") %>%\n             mutate(MIG_PR_2 = as.numeric(LEV2_RES!=LEV2_ANT))\n\nsaveRDS(rp,\"ipums/rp/mobil_benin_4dates_samp10pct_V2.RDS\" )"
  }
]