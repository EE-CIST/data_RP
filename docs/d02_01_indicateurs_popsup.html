<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.36">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>L’INTERET PEDAGOGIQUE DES DONNEES IPUMS INTERNATIONAL - 4&nbsp; Population, surface, densité</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./d02_02_indicateurs_equipt.html" rel="next">
<link href="./d02_00_indicateurs_introduction.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Population, surface, densité</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">L’INTERET PEDAGOGIQUE DES DONNEES IPUMS INTERNATIONAL</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Préface</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./d00_02_intro_resume.html" class="sidebar-item-text sidebar-link">Résumé</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./d01_00_import_introduction.html" class="sidebar-item-text sidebar-link">IMPORTATION DES DONNEES</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./d01_01_import_conditions.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Conditions d’utilisation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./d01_02_import_individus.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Données individuelles</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./d01_03_import_geometries.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Données géométriques</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./d02_00_indicateurs_introduction.html" class="sidebar-item-text sidebar-link">COMPARAISONS DE PAYS</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./d02_01_indicateurs_popsup.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Population, surface, densité</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./d02_02_indicateurs_equipt.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Equipement des ménages</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./d02_03_indicateurs_tabcont.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Sexe, âge et urbanité</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./d03_00_mobil_introduction.html" class="sidebar-item-text sidebar-link">COMPARAISONS DANS LE TEMPS</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./d03_01_mobil_data.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Préparation des données</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./d03_02_mobil_durvie.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Migrations durée de vie</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./d09_01_references.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#agrégation-de-la-population" id="toc-agrégation-de-la-population" class="nav-link active" data-scroll-target="#agrégation-de-la-population"> <span class="header-section-number">4.1</span> Agrégation de la population</a></li>
  <li><a href="#jointure-avec-les-géométries" id="toc-jointure-avec-les-géométries" class="nav-link" data-scroll-target="#jointure-avec-les-géométries"> <span class="header-section-number">4.2</span> Jointure avec les géométries</a>
  <ul class="collapse">
  <li><a href="#bénin-rp-2013" id="toc-bénin-rp-2013" class="nav-link" data-scroll-target="#bénin-rp-2013"> <span class="header-section-number">4.2.1</span> Bénin, RP 2013</a></li>
  <li><a href="#burkina-faso-rp-2006" id="toc-burkina-faso-rp-2006" class="nav-link" data-scroll-target="#burkina-faso-rp-2006"> <span class="header-section-number">4.2.2</span> Burkina Faso, RP 2006</a></li>
  <li><a href="#mali-rp-2009" id="toc-mali-rp-2009" class="nav-link" data-scroll-target="#mali-rp-2009"> <span class="header-section-number">4.2.3</span> Mali, RP 2009</a></li>
  <li><a href="#togo-rp-2010" id="toc-togo-rp-2010" class="nav-link" data-scroll-target="#togo-rp-2010"> <span class="header-section-number">4.2.4</span> Togo, RP 2010</a></li>
  <li><a href="#sénégal-rp-2013" id="toc-sénégal-rp-2013" class="nav-link" data-scroll-target="#sénégal-rp-2013"> <span class="header-section-number">4.2.5</span> Sénégal, RP 2013</a></li>
  </ul></li>
  <li><a href="#calcul-des-superficies-et-densités" id="toc-calcul-des-superficies-et-densités" class="nav-link" data-scroll-target="#calcul-des-superficies-et-densités"> <span class="header-section-number">4.3</span> Calcul des superficies et densités</a>
  <ul class="collapse">
  <li><a href="#rp-bénin-2013" id="toc-rp-bénin-2013" class="nav-link" data-scroll-target="#rp-bénin-2013"> <span class="header-section-number">4.3.1</span> RP Bénin, 2013</a></li>
  <li><a href="#rp-burkina-faso-2006" id="toc-rp-burkina-faso-2006" class="nav-link" data-scroll-target="#rp-burkina-faso-2006"> <span class="header-section-number">4.3.2</span> RP Burkina Faso, 2006</a></li>
  <li><a href="#rp-mali-2009" id="toc-rp-mali-2009" class="nav-link" data-scroll-target="#rp-mali-2009"> <span class="header-section-number">4.3.3</span> RP Mali, 2009</a></li>
  <li><a href="#rp-sénégal-2013" id="toc-rp-sénégal-2013" class="nav-link" data-scroll-target="#rp-sénégal-2013"> <span class="header-section-number">4.3.4</span> RP Sénégal, 2013</a></li>
  <li><a href="#rp-togo-2010" id="toc-rp-togo-2010" class="nav-link" data-scroll-target="#rp-togo-2010"> <span class="header-section-number">4.3.5</span> RP Togo, 2010</a></li>
  </ul></li>
  <li><a href="#cartogrammes-démographiques" id="toc-cartogrammes-démographiques" class="nav-link" data-scroll-target="#cartogrammes-démographiques"> <span class="header-section-number">4.4</span> Cartogrammes démographiques</a>
  <ul class="collapse">
  <li><a href="#rp-bénin-2013-1" id="toc-rp-bénin-2013-1" class="nav-link" data-scroll-target="#rp-bénin-2013-1"> <span class="header-section-number">4.4.1</span> RP Bénin, 2013</a></li>
  <li><a href="#rp-burkina-faso-2006-1" id="toc-rp-burkina-faso-2006-1" class="nav-link" data-scroll-target="#rp-burkina-faso-2006-1"> <span class="header-section-number">4.4.2</span> RP Burkina Faso, 2006</a></li>
  <li><a href="#rp-mali-2009-1" id="toc-rp-mali-2009-1" class="nav-link" data-scroll-target="#rp-mali-2009-1"> <span class="header-section-number">4.4.3</span> RP Mali, 2009</a></li>
  <li><a href="#rp-sénégal-2013-1" id="toc-rp-sénégal-2013-1" class="nav-link" data-scroll-target="#rp-sénégal-2013-1"> <span class="header-section-number">4.4.4</span> RP Sénégal, 2013</a></li>
  <li><a href="#rp-togo-2010-1" id="toc-rp-togo-2010-1" class="nav-link" data-scroll-target="#rp-togo-2010-1"> <span class="header-section-number">4.4.5</span> RP Togo, 2010</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Population, surface, densité</span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<p>Le premier exemple de création d’indicateur concerne l’établissement de cartes de densité ce qui suppose de mobiliser à la fois les données individuelles (pour agréger la population) et les données géographiques (pour calculer la superficie).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attachement du package : 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Les objets suivants sont masqués depuis 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Les objets suivants sont masqués depuis 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Linking to GEOS 3.9.1, GDAL 3.4.3, PROJ 7.2.1; sf_use_s2() is TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mapsf)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="agrégation-de-la-population" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="agrégation-de-la-population"><span class="header-section-number">4.1</span> Agrégation de la population</h2>
<p>Une question intéressante concerne la marge d’erreur du calcul des populations selon que l’on part d’un échantillon plus ou moins dense (ici, à 1 pct ou 10 pct). Ce point méritera d’être discuté avec les spécialistes de statistique inférentielle du projet. Nous nous bornerons ici à calculer les indicateurs tirés de l’échantillon à 10%</p>
<p>On calcule pour chacune des unités territoriales de niveau I ou II la somme des individus pondérée par le poids des individus (PERWT) et on stocke le résultat dans un dossier commun à tous les recensments appelés all. Ceci évitera d’avoir à refaire le calcul dans les étapes suivantes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Chargement des données</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>rp <span class="ot">&lt;-</span><span class="fu">readRDS</span>(<span class="at">file =</span> <span class="st">"ipums/rp/rp_fivecountries_samp10pct.RDS"</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Calcul des populations au niveau administratif I</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>pop1<span class="ot">&lt;-</span>rp      <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(GEOLEV1) <span class="sc">%&gt;%</span> </span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">summarise</span>(<span class="at">POP=</span><span class="fu">sum</span>(PERWT))  <span class="sc">%&gt;%</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">mutate</span>(<span class="at">GEOLEV1 =</span> <span class="fu">as.character</span>(GEOLEV1))</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(pop1, <span class="st">"indic/all/POP_LEV1.RDS"</span>)</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="do">## Calcul des populations au niveau administratif II</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>pop2<span class="ot">&lt;-</span>rp      <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(GEOLEV2) <span class="sc">%&gt;%</span> </span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">summarise</span>(<span class="at">POP=</span><span class="fu">sum</span>(PERWT))  <span class="sc">%&gt;%</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">mutate</span>(<span class="at">GEOLEV2 =</span> <span class="fu">as.character</span>(GEOLEV2))</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(pop2, <span class="st">"indic/all/POP_LEV2.RDS"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="jointure-avec-les-géométries" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="jointure-avec-les-géométries"><span class="header-section-number">4.2</span> Jointure avec les géométries</h2>
<p>On va maintenant procéder à la jointure des données avec les fonds de carte puis stocker ces derniers enrichis par la population au format sf. On crée pour cela une procédure semi-automatique qu’on va applique au RP Bénin 2013 et qui sera ensuite répliquée sur les autres recensements étudiés.</p>
<section id="bénin-rp-2013" class="level3" data-number="4.2.1">
<h3 data-number="4.2.1" class="anchored" data-anchor-id="bénin-rp-2013"><span class="header-section-number">4.2.1</span> Bénin, RP 2013</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>census<span class="ot">=</span><span class="st">"bj2013"</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>refmap<span class="ot">=</span><span class="st">"bj1979_2013"</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># --------------- Niveau administratif I ----------------------</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Load population</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>pop1<span class="ot">&lt;-</span><span class="fu">readRDS</span>(<span class="st">"indic/all/POP_LEV1.RDS"</span>)</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="do">## Read Geometry and create code</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>map1<span class="ot">&lt;-</span><span class="fu">readRDS</span>(<span class="fu">paste0</span>(<span class="st">"ipums/geom/geo1_"</span>, refmap,<span class="st">".RDS"</span>)) <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">GEOLEV1=</span>GEOLEVEL1)</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="do">## Join</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>mapdon1<span class="ot">&lt;-</span><span class="fu">left_join</span>(map1,pop1) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="at">code =</span> GEOLEV1,</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">nom  =</span> ADMIN_NAME,</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">pays =</span> CNTRY_NAME,</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">pop =</span> POP,</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">geometry =</span> geometry)<span class="sc">%&gt;%</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>                                  <span class="fu">filter</span>(nom <span class="sc">!=</span><span class="st">"Unknown"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>                                  <span class="fu">st_make_valid</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining, by = "GEOLEV1"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Save</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(mapdon1,<span class="fu">paste0</span>(<span class="st">"indic/"</span>,census,<span class="st">"/"</span>,<span class="st">"pop_lev1_"</span>,census,<span class="st">".RDS"</span>))</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># --------------- Niveau administratif II ----------------------                            ## Load population</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>pop2<span class="ot">&lt;-</span><span class="fu">readRDS</span>(<span class="st">"indic/all/POP_LEV2.RDS"</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Read Geometry and create code</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>map2<span class="ot">&lt;-</span><span class="fu">readRDS</span>(<span class="fu">paste0</span>(<span class="st">"ipums/geom/geo2_"</span>, refmap,<span class="st">".RDS"</span>)) <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">GEOLEV2=</span>GEOLEVEL2)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="do">## Join</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>mapdon2<span class="ot">&lt;-</span><span class="fu">left_join</span>(map2,pop2) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="at">code =</span> GEOLEV2,</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">nom  =</span> ADMIN_NAME,</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">pays =</span> CNTRY_NAME,</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">pop =</span> POP,</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">geometry =</span> geometry)<span class="sc">%&gt;%</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>                                  <span class="fu">filter</span>(nom <span class="sc">!=</span><span class="st">"Unknown"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>                                  <span class="fu">st_make_valid</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining, by = "GEOLEV2"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Save</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(mapdon2,<span class="fu">paste0</span>(<span class="st">"indic/"</span>,census,<span class="st">"/"</span>,<span class="st">"pop_lev2_"</span>,census,<span class="st">".RDS"</span>))</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Vérification</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="fu">mf_map</span>(mapdon1, <span class="at">type=</span><span class="st">"base"</span>, <span class="at">col=</span><span class="st">"lightyellow"</span>)</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="fu">mf_map</span>(mapdon1,<span class="at">type=</span><span class="st">"prop"</span>, <span class="at">var=</span><span class="st">"pop"</span>,<span class="at">inches =</span> <span class="fl">0.1</span>)</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="fu">mf_layout</span>(<span class="at">title =</span> <span class="fu">paste</span>(census,<span class="st">"- Population au niveau I"</span>),</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>          <span class="at">credits =</span> <span class="st">"Source :  IPUMS, 2020 &amp; INS Benin, 2013"</span>,</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>          <span class="at">scale =</span> <span class="cn">FALSE</span>, <span class="at">arrow=</span><span class="cn">FALSE</span>)</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="fu">mf_map</span>(mapdon2, <span class="at">type=</span><span class="st">"base"</span>, <span class="at">col=</span><span class="st">"lightyellow"</span>)</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="fu">mf_map</span>(mapdon2,<span class="at">type=</span><span class="st">"prop"</span>, <span class="at">var=</span><span class="st">"pop"</span>,<span class="at">inches =</span> <span class="fl">0.1</span>)</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="fu">mf_layout</span>(<span class="at">title =</span> <span class="fu">paste</span>(census,<span class="st">"- Population au niveau II"</span>),</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>          <span class="at">credits =</span> <span class="st">"Source :  IPUMS, 2020 &amp; INS Benin, 2013"</span>,</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>          <span class="at">scale =</span> <span class="cn">FALSE</span>, <span class="at">arrow=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="d02_01_indicateurs_popsup_files/figure-html/pop_bj2013-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="burkina-faso-rp-2006" class="level3" data-number="4.2.2">
<h3 data-number="4.2.2" class="anchored" data-anchor-id="burkina-faso-rp-2006"><span class="header-section-number">4.2.2</span> Burkina Faso, RP 2006</h3>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Joining, by = "GEOLEV1"
Joining, by = "GEOLEV2"</code></pre>
</div>
<div class="cell-output-display">
<p><img src="d02_01_indicateurs_popsup_files/figure-html/pop_bf2006-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="mali-rp-2009" class="level3" data-number="4.2.3">
<h3 data-number="4.2.3" class="anchored" data-anchor-id="mali-rp-2009"><span class="header-section-number">4.2.3</span> Mali, RP 2009</h3>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Joining, by = "GEOLEV1"
Joining, by = "GEOLEV2"</code></pre>
</div>
<div class="cell-output-display">
<p><img src="d02_01_indicateurs_popsup_files/figure-html/pop_ml2009-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li><strong>N.B.</strong> : il a fallu supprimer un polygone vide concernant les valeurs “<em>Unknown</em>” et réparer la géométrie d’une unité en appliquant la fonction <em>st_make_valid()</em> du package <em>sf</em>.</li>
</ul>
</section>
<section id="togo-rp-2010" class="level3" data-number="4.2.4">
<h3 data-number="4.2.4" class="anchored" data-anchor-id="togo-rp-2010"><span class="header-section-number">4.2.4</span> Togo, RP 2010</h3>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Joining, by = "GEOLEV1"
Joining, by = "GEOLEV2"</code></pre>
</div>
<div class="cell-output-display">
<p><img src="d02_01_indicateurs_popsup_files/figure-html/pop_tg2010-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li><strong>N.B.</strong> : il a fallu supprimer un polygone vide concernant les valeurs “<em>Unknown</em>” et réparer la géométrie d’une unité en appliquant la fonction <em>st_make_valid()</em> du package <em>sf</em>.</li>
</ul>
</section>
<section id="sénégal-rp-2013" class="level3" data-number="4.2.5">
<h3 data-number="4.2.5" class="anchored" data-anchor-id="sénégal-rp-2013"><span class="header-section-number">4.2.5</span> Sénégal, RP 2013</h3>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Joining, by = "GEOLEV1"
Joining, by = "GEOLEV2"</code></pre>
</div>
<div class="cell-output-display">
<p><img src="d02_01_indicateurs_popsup_files/figure-html/pop_sn2013-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="calcul-des-superficies-et-densités" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="calcul-des-superficies-et-densités"><span class="header-section-number">4.3</span> Calcul des superficies et densités</h2>
<p>Maintenant que les variables de population sont incluses dans un fichier sf, on peut y ajouter la superficie à l’aide d’un simple calcul géométrique et en déduire la densité de population des unités territoriales. Le calcul des superficies est évidemment légèrement entaché d’erreur puisqu’il dépend de la précision du fonds de carte. Ainis, dans le cas Bénin, nous trouvons une superficie de 115768 km2 alors que la valeur donnée par la Banque Mondiale est de 114760 km2.</p>
<p>Les fichiers sont exportés au à la fois au format sf (en .RDS) et au format shapefile pour servir de point de départ à l’ensemble des analyses cartographiques ultérieures.</p>
<section id="rp-bénin-2013" class="level3" data-number="4.3.1">
<h3 data-number="4.3.1" class="anchored" data-anchor-id="rp-bénin-2013"><span class="header-section-number">4.3.1</span> RP Bénin, 2013</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>census<span class="ot">=</span><span class="st">"bj2013"</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># calcul des indicateurs au niveau I</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>map1<span class="ot">&lt;-</span><span class="fu">readRDS</span>(<span class="fu">paste0</span>(<span class="st">"indic/"</span>,census,<span class="st">"/"</span>,<span class="st">"pop_lev1_"</span>,census,<span class="st">".RDS"</span>))</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>map1<span class="sc">$</span>sup<span class="ot">&lt;-</span><span class="fu">as.numeric</span>(<span class="fu">st_area</span>(map1)<span class="sc">/</span>(<span class="dv">1000</span><span class="sc">*</span><span class="dv">1000</span>))</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>map1<span class="sc">$</span>den<span class="ot">&lt;-</span> map1<span class="sc">$</span>pop<span class="sc">/</span>map1<span class="sc">$</span>sup</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(map1, <span class="fu">paste0</span>(<span class="st">"indic/"</span>,census,<span class="st">"/"</span>,<span class="st">"map_lev1_"</span>,census,<span class="st">".RDS"</span>))</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="fu">st_write</span>(map1, <span class="fu">paste0</span>(<span class="st">"indic/"</span>,census,<span class="st">"/"</span>,<span class="st">"map_lev1_"</span>,census,<span class="st">".shp"</span>),<span class="at">delete_dsn =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Deleting source `indic/bj2013/map_lev1_bj2013.shp' using driver `ESRI Shapefile'
Writing layer `map_lev1_bj2013' to data source 
  `indic/bj2013/map_lev1_bj2013.shp' using driver `ESRI Shapefile'
Writing 12 features with 6 fields and geometry type Multi Polygon.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calcul des indicateurs au niveau II</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>map2<span class="ot">&lt;-</span><span class="fu">readRDS</span>(<span class="fu">paste0</span>(<span class="st">"indic/"</span>,census,<span class="st">"/"</span>,<span class="st">"pop_lev2_"</span>,census,<span class="st">".RDS"</span>))</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>map2<span class="sc">$</span>sup<span class="ot">&lt;-</span><span class="fu">as.numeric</span>(<span class="fu">st_area</span>(map2)<span class="sc">/</span>(<span class="dv">1000</span><span class="sc">*</span><span class="dv">1000</span>))</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>map2<span class="sc">$</span>den<span class="ot">&lt;-</span> map2<span class="sc">$</span>pop<span class="sc">/</span>map2<span class="sc">$</span>sup</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(map2, <span class="fu">paste0</span>(<span class="st">"indic/"</span>,census,<span class="st">"/"</span>,<span class="st">"map_lev2_"</span>,census,<span class="st">".RDS"</span>))</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="fu">st_write</span>(map2, <span class="fu">paste0</span>(<span class="st">"indic/"</span>,census,<span class="st">"/"</span>,<span class="st">"map_lev2_"</span>,census,<span class="st">".shp"</span>),<span class="at">delete_dsn =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Deleting source `indic/bj2013/map_lev2_bj2013.shp' using driver `ESRI Shapefile'
Writing layer `map_lev2_bj2013' to data source 
  `indic/bj2013/map_lev2_bj2013.shp' using driver `ESRI Shapefile'
Writing 77 features with 6 fields and geometry type Multi Polygon.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Vérification</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>mybreaks<span class="ot">=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">40</span>,<span class="dv">80</span>,<span class="dv">160</span>,<span class="dv">320</span>,<span class="dv">10000</span>)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>mycols <span class="ot">=</span> <span class="fu">brewer.pal</span>(<span class="dv">8</span>,<span class="st">"YlOrBr"</span>)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="fu">mf_map</span>(map1,<span class="at">type=</span><span class="st">"choro"</span>, </span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">var=</span><span class="st">"den"</span>,</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">breaks=</span>mybreaks,</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">pal=</span>mycols,</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">leg_title =</span> <span class="st">"hab./km2"</span>,</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">leg_val_rnd =</span> <span class="dv">0</span>)</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a><span class="fu">mf_layout</span>(<span class="at">title =</span> <span class="fu">paste</span>(census,<span class="st">"- Densite de population au niveau I"</span>),</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>          <span class="at">credits =</span> <span class="st">"Sources :  IPUMS, 2020 &amp; INS Bénin,2013"</span>,</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>          <span class="at">scale =</span> <span class="cn">FALSE</span>, <span class="at">arrow=</span><span class="cn">FALSE</span>)</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a><span class="fu">mf_map</span>(map2,<span class="at">type=</span><span class="st">"choro"</span>, </span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">var=</span><span class="st">"den"</span>,</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">breaks=</span>mybreaks,</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>            <span class="at">pal=</span>mycols,</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>            <span class="at">leg_title =</span> <span class="st">"hab./km2"</span>,</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>            <span class="at">leg_val_rnd =</span> <span class="dv">0</span>,</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>             <span class="at">lwd=</span><span class="fl">0.3</span>,</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>             <span class="at">border =</span> <span class="st">"gray80"</span>)</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a><span class="fu">mf_map</span>(map1,<span class="at">type=</span><span class="st">"base"</span>, </span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>            <span class="at">add=</span>T,</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>            <span class="at">lwd=</span><span class="dv">1</span>,</span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>            <span class="at">col =</span> <span class="cn">NA</span>,</span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>            <span class="at">border=</span><span class="st">"black"</span>)</span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a><span class="fu">mf_layout</span>(<span class="at">title =</span> <span class="fu">paste</span>(census,<span class="st">"- Densite de population au niveau II"</span>),</span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>          <span class="at">credits =</span> <span class="st">"Sources :  IPUMS, 2020 &amp; INS Bénin,2013"</span>,</span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>          <span class="at">scale =</span> <span class="cn">FALSE</span>, <span class="at">arrow=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="d02_01_indicateurs_popsup_files/figure-html/den_bn2013-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="rp-burkina-faso-2006" class="level3" data-number="4.3.2">
<h3 data-number="4.3.2" class="anchored" data-anchor-id="rp-burkina-faso-2006"><span class="header-section-number">4.3.2</span> RP Burkina Faso, 2006</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Deleting source `indic/bf2006/map_lev1_bf2006.shp' using driver `ESRI Shapefile'
Writing layer `map_lev1_bf2006' to data source 
  `indic/bf2006/map_lev1_bf2006.shp' using driver `ESRI Shapefile'
Writing 13 features with 6 fields and geometry type Multi Polygon.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Deleting source `indic/bf2006/map_lev2_bf2006.shp' using driver `ESRI Shapefile'
Writing layer `map_lev2_bf2006' to data source 
  `indic/bf2006/map_lev2_bf2006.shp' using driver `ESRI Shapefile'
Writing 45 features with 6 fields and geometry type Multi Polygon.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="d02_01_indicateurs_popsup_files/figure-html/den_bf2006-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="rp-mali-2009" class="level3" data-number="4.3.3">
<h3 data-number="4.3.3" class="anchored" data-anchor-id="rp-mali-2009"><span class="header-section-number">4.3.3</span> RP Mali, 2009</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Deleting source `indic/ml2009/map_lev1_ml2009.shp' using driver `ESRI Shapefile'
Writing layer `map_lev1_ml2009' to data source 
  `indic/ml2009/map_lev1_ml2009.shp' using driver `ESRI Shapefile'
Writing 8 features with 6 fields and geometry type Polygon.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Deleting source `indic/ml2009/map_lev2_ml2009.shp' using driver `ESRI Shapefile'
Writing layer `map_lev2_ml2009' to data source 
  `indic/ml2009/map_lev2_ml2009.shp' using driver `ESRI Shapefile'
Writing 47 features with 6 fields and geometry type Multi Polygon.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="d02_01_indicateurs_popsup_files/figure-html/den_ml2009-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="rp-sénégal-2013" class="level3" data-number="4.3.4">
<h3 data-number="4.3.4" class="anchored" data-anchor-id="rp-sénégal-2013"><span class="header-section-number">4.3.4</span> RP Sénégal, 2013</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Deleting source `indic/sn2013/map_lev1_sn2013.shp' using driver `ESRI Shapefile'
Writing layer `map_lev1_sn2013' to data source 
  `indic/sn2013/map_lev1_sn2013.shp' using driver `ESRI Shapefile'
Writing 8 features with 6 fields and geometry type Multi Polygon.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Deleting source `indic/sn2013/map_lev2_sn2013.shp' using driver `ESRI Shapefile'
Writing layer `map_lev2_sn2013' to data source 
  `indic/sn2013/map_lev2_sn2013.shp' using driver `ESRI Shapefile'
Writing 27 features with 6 fields and geometry type Multi Polygon.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="d02_01_indicateurs_popsup_files/figure-html/den_sn2013-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="rp-togo-2010" class="level3" data-number="4.3.5">
<h3 data-number="4.3.5" class="anchored" data-anchor-id="rp-togo-2010"><span class="header-section-number">4.3.5</span> RP Togo, 2010</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Deleting source `indic/tg2010/map_lev1_tg2010.shp' using driver `ESRI Shapefile'
Writing layer `map_lev1_tg2010' to data source 
  `indic/tg2010/map_lev1_tg2010.shp' using driver `ESRI Shapefile'
Writing 3 features with 6 fields and geometry type Polygon.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Deleting source `indic/tg2010/map_lev2_tg2010.shp' using driver `ESRI Shapefile'
Writing layer `map_lev2_tg2010' to data source 
  `indic/tg2010/map_lev2_tg2010.shp' using driver `ESRI Shapefile'
Writing 37 features with 6 fields and geometry type Multi Polygon.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="d02_01_indicateurs_popsup_files/figure-html/den_tg2010-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="cartogrammes-démographiques" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="cartogrammes-démographiques"><span class="header-section-number">4.4</span> Cartogrammes démographiques</h2>
<p>Nous procédons dans cette dernière étape à la création de cartogrammes où la surface des unité terrioriales est approximativement proportionelle à leur population à la date du recensement. L’opération de transformation est effectuée en dehors du logiciel R à l’aide du logiciel ScapeToad qui est l’un des plus performant. La transformation est réalisée sur le niveau administraif II puis celui-ci est agrégé dans R à l’aide du package sf pour reconstituer le niveau administratif I.</p>
<ul>
<li><strong>N.B.</strong> : le calcul de l’anamorphose avec Scapetoad a été assez long et coûteux en calcul pour le Sénégal en raison de la complexité du tracé des limites. Un fonds généralisé est en général plus rapide à transformer.</li>
</ul>
<section id="rp-bénin-2013-1" class="level3" data-number="4.4.1">
<h3 data-number="4.4.1" class="anchored" data-anchor-id="rp-bénin-2013-1"><span class="header-section-number">4.4.1</span> RP Bénin, 2013</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>census <span class="ot">=</span> <span class="st">"bj2013"</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load level2 and remove columns created by scapetoad</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>cartog2<span class="ot">&lt;-</span><span class="fu">st_read</span>(<span class="fu">paste0</span>(<span class="st">"indic/"</span>,census,<span class="st">"/"</span>,<span class="st">"cartog_lev2_"</span>,census,<span class="st">".shp"</span>), <span class="at">quiet =</span> T) <span class="sc">%&gt;%</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(code, nom, pays, pop, geometry)</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="fu">st_write</span>(cartog2,<span class="fu">paste0</span>(<span class="st">"indic/"</span>,census,<span class="st">"/"</span>,<span class="st">"cartog_lev2_"</span>,census,<span class="st">".shp"</span>),<span class="at">delete_dsn =</span> T , <span class="at">quiet =</span> T)</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="co"># agregate level2 to level 1</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>cartog1 <span class="ot">&lt;-</span> cartog2 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">code2 =</span> code, <span class="at">code=</span><span class="fu">substr</span>(code2,<span class="dv">1</span>,<span class="dv">6</span>))<span class="sc">%&gt;%</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>              <span class="fu">select</span>(code, geometry) <span class="sc">%&gt;%</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>              <span class="fu">group_by</span>(code) <span class="sc">%&gt;%</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>              <span class="fu">summarize</span>() <span class="sc">%&gt;%</span> <span class="fu">st_as_sf</span>() <span class="sc">%&gt;%</span></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>              <span class="fu">st_buffer</span>( <span class="at">dist=</span><span class="fl">0.001</span>)</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a><span class="co"># load attribute from level1</span></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>don1<span class="ot">&lt;-</span><span class="fu">st_read</span>(<span class="fu">paste0</span>(<span class="st">"indic/"</span>,census,<span class="st">"/"</span>,<span class="st">"map_lev1_"</span>,census,<span class="st">".shp"</span>), <span class="at">quiet =</span> T) <span class="sc">%&gt;%</span> <span class="fu">st_drop_geometry</span>()</span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>cartog1 <span class="ot">&lt;-</span> don1 <span class="sc">%&gt;%</span> <span class="fu">right_join</span>(cartog1) <span class="sc">%&gt;%</span> <span class="fu">st_as_sf</span>() <span class="sc">%&gt;%</span> <span class="fu">select</span>(code, nom, pays, pop, geometry)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining, by = "code"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_write</span>(cartog1,<span class="fu">paste0</span>(<span class="st">"indic/"</span>,census,<span class="st">"/"</span>,<span class="st">"cartog_lev1_"</span>,census,<span class="st">".shp"</span>),<span class="at">delete_dsn =</span> T , <span class="at">quiet =</span> T)</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Vérification</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="fu">mf_map</span>(cartog1, <span class="at">type=</span><span class="st">"base"</span>, <span class="at">col=</span><span class="st">"lightyellow"</span>)</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="fu">mf_map</span>(cartog1,<span class="at">type=</span><span class="st">"prop"</span>, <span class="at">var=</span><span class="st">"pop"</span>,<span class="at">inches =</span> <span class="fl">0.1</span>)</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="fu">mf_layout</span>(<span class="at">title =</span> <span class="fu">paste</span>(census,<span class="st">"- Cartogramme  au niveau I"</span>),</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">credits =</span> <span class="st">"Source :  IPUMS, 2020 &amp; INS Benin, 2013"</span>,</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>          <span class="at">scale =</span> <span class="cn">FALSE</span>, <span class="at">arrow=</span><span class="cn">FALSE</span>)</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a><span class="fu">mf_map</span>(cartog2, <span class="at">type=</span><span class="st">"base"</span>, <span class="at">col=</span><span class="st">"lightyellow"</span>)</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a><span class="fu">mf_map</span>(cartog2,<span class="at">type=</span><span class="st">"prop"</span>, <span class="at">var=</span><span class="st">"pop"</span>,<span class="at">inches =</span> <span class="fl">0.1</span>)</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a><span class="fu">mf_layout</span>(<span class="at">title =</span> <span class="fu">paste</span>(census,<span class="st">"- Cartogramme au niveau II"</span>),</span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>          <span class="at">credits =</span> <span class="st">"Source :  IPUMS, 2020 &amp; INS Benin, 2013"</span>,</span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>          <span class="at">scale =</span> <span class="cn">FALSE</span>, <span class="at">arrow=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="d02_01_indicateurs_popsup_files/figure-html/cartog_bj2013-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="rp-burkina-faso-2006-1" class="level3" data-number="4.4.2">
<h3 data-number="4.4.2" class="anchored" data-anchor-id="rp-burkina-faso-2006-1"><span class="header-section-number">4.4.2</span> RP Burkina Faso, 2006</h3>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Joining, by = "code"</code></pre>
</div>
<div class="cell-output-display">
<p><img src="d02_01_indicateurs_popsup_files/figure-html/cartog_bf2006-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="rp-mali-2009-1" class="level3" data-number="4.4.3">
<h3 data-number="4.4.3" class="anchored" data-anchor-id="rp-mali-2009-1"><span class="header-section-number">4.4.3</span> RP Mali, 2009</h3>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Joining, by = "code"</code></pre>
</div>
<div class="cell-output-display">
<p><img src="d02_01_indicateurs_popsup_files/figure-html/cartog_ml2009-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="rp-sénégal-2013-1" class="level3" data-number="4.4.4">
<h3 data-number="4.4.4" class="anchored" data-anchor-id="rp-sénégal-2013-1"><span class="header-section-number">4.4.4</span> RP Sénégal, 2013</h3>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Joining, by = "code"</code></pre>
</div>
<div class="cell-output-display">
<p><img src="d02_01_indicateurs_popsup_files/figure-html/cartog_sn2013-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="rp-togo-2010-1" class="level3" data-number="4.4.5">
<h3 data-number="4.4.5" class="anchored" data-anchor-id="rp-togo-2010-1"><span class="header-section-number">4.4.5</span> RP Togo, 2010</h3>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Joining, by = "code"</code></pre>
</div>
<div class="cell-output-display">
<p><img src="d02_01_indicateurs_popsup_files/figure-html/cartog_tg2010-1.png" class="img-fluid" width="672"></p>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./d02_00_indicateurs_introduction.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">COMPARAISONS DE PAYS</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./d02_02_indicateurs_equipt.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Equipement des ménages</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>